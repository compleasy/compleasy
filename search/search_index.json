{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#trikusec-documentation","title":"TrikuSec Documentation","text":"<p>Welcome to the TrikuSec documentation!</p> <p>TrikuSec is a centralized Linux server auditing and compliance management platform built on Lynis. It collects, stores, and analyzes security audit reports from multiple Linux servers in one place, enabling centralized monitoring and policy compliance management across your infrastructure.</p>"},{"location":"#use-cases","title":"Use Cases","text":"<p>TrikuSec is ideal for:</p> <ul> <li>Security Compliance Monitoring: Ensure servers meet security policies and regulatory requirements</li> <li>Infrastructure Auditing: Track security posture across multiple servers from a single dashboard</li> <li>Change Tracking: Monitor changes between audit runs to identify security drift</li> <li>Policy Enforcement: Automatically evaluate compliance against organizational policies</li> <li>Centralized Reporting: Single point of visibility for all server audits across your infrastructure</li> </ul>"},{"location":"#security-philosophy","title":"Security Philosophy","text":"<p>TrikuSec is designed with security as the top priority. We believe that security monitoring tools should never compromise the security of the systems they monitor.</p> <p>Key Principles:</p> <ul> <li>Read-Only: TrikuSec only receives data\u2014no commands are sent or run on your servers.</li> <li>No Agents: Only Lynis is needed on servers; no extra daemons or proprietary software.</li> <li>Server Independence: TrikuSec does not control or alter your systems.</li> </ul> <p>This approach improves monitoring without added risk.</p>"},{"location":"#features","title":"Features","text":""},{"location":"#core-capabilities","title":"Core Capabilities","text":"<ul> <li>Centralized Audit Collection: Receives audit reports from multiple Linux servers via Lynis clients, storing full reports and generating diff reports to track changes over time</li> <li>Device Management: Tracks all monitored servers with metadata including hostname, OS, distribution, version, and compliance status</li> <li>Policy &amp; Compliance Management: Define custom compliance rules using a query language and automatically evaluate devices against assigned policies</li> <li>Report Analysis: View complete audit reports, track changes between audits, and analyze historical compliance trends</li> <li>Web Dashboard: User-friendly interface for viewing devices, compliance status, policies, and reports</li> <li>API Integration: Lynis-compatible API endpoints for seamless integration with existing Lynis installations</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li>Install TrikuSec - Get started with Docker installation</li> <li>Configure Client - Set up Lynis clients to send reports</li> <li>Start Using - Learn how to use the dashboard and manage your servers</li> </ol>"},{"location":"#documentation-structure","title":"Documentation Structure","text":"<ul> <li>Installation - Installation guides for server and clients</li> <li>Configuration - Environment variables, security settings, and advanced configuration</li> <li>Usage - User guides for dashboard, policies, and reports</li> <li>API Reference - API endpoints and integration guides</li> <li>Development - Contributing, testing, and development setup</li> <li>License - License information (GPL-3.0)</li> </ul>"},{"location":"#status","title":"Status","text":"<p>Development Status</p> <p>This project is still in development and should NOT be used in production.</p>"},{"location":"#acknowledgments","title":"Acknowledgments","text":"<p>TrikuSec is built on Lynis, an excellent open-source security auditing tool. We are grateful to the Lynis project and its community for providing such a robust foundation.</p>"},{"location":"#important-note","title":"Important Note","text":"<p>TrikuSec is not a professional product. This is an open-source project in active development. If you are looking for a robust, production-ready security solution with professional support, service level agreements, and enterprise features, we recommend considering Lynis Enterprise by CISOfy.</p> <p>No Affiliation</p> <p>We have no relationship, affiliation, or partnership with CISOfy. This recommendation is made solely to help users find appropriate solutions for their needs.</p>"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li>Issues: GitHub Issues</li> <li>Repository: GitHub Repository</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"license/","title":"License","text":""},{"location":"license/#license","title":"License","text":"<p>TrikuSec is licensed under the GNU General Public License v3.0 (GPL-3.0).</p>"},{"location":"license/#gpl-30-license","title":"GPL-3.0 License","text":"<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p> <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p> <p>You should have received a copy of the GNU General Public License along with this program. If not, see https://www.gnu.org/licenses/.</p>"},{"location":"license/#full-license-text","title":"Full License Text","text":"<p>The complete GPL-3.0 license text is available in the LICENSE file in the repository root.</p>"},{"location":"license/#third-party-licenses","title":"Third-Party Licenses","text":"<p>TrikuSec uses the following open-source projects:</p> <ul> <li>Django - BSD License</li> <li>Lynis - GPL v3</li> <li>Material for MkDocs - MIT License</li> </ul> <p>See individual project licenses for details.</p>"},{"location":"license/#contributing","title":"Contributing","text":"<p>By contributing to TrikuSec, you agree that your contributions will be licensed under the same license as the project (GPL-3.0).</p> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"api/","title":"Index","text":""},{"location":"api/#api-reference","title":"API Reference","text":"<p>Complete API reference for TrikuSec.</p>"},{"location":"api/#overview","title":"Overview","text":"<p>TrikuSec provides REST API endpoints for:</p> <ul> <li>Uploading audit reports</li> <li>License key validation</li> <li>Device management</li> <li>Policy management</li> <li>Report retrieval</li> </ul>"},{"location":"api/#base-url","title":"Base URL","text":"<pre><code>https://yourserver:3000/api\n</code></pre>"},{"location":"api/#api-versioning","title":"API Versioning","text":"<p>TrikuSec supports API versioning:</p> <ul> <li>Versioned API: <code>/api/v1/lynis/...</code></li> <li>Legacy API: <code>/api/lynis/...</code> (for backward compatibility)</li> </ul> <p>Both endpoints route to the same views.</p>"},{"location":"api/#authentication","title":"Authentication","text":"<p>Currently, API endpoints use license key authentication. See Authentication for details.</p>"},{"location":"api/#endpoints","title":"Endpoints","text":"<ul> <li>API Endpoints - Complete list of endpoints</li> <li>Authentication - Authentication methods</li> <li>Examples - Code examples and use cases</li> </ul>"},{"location":"api/#rate-limiting","title":"Rate Limiting","text":"<p>API endpoints are rate-limited to prevent abuse. See configuration for details.</p>"},{"location":"api/#response-formats","title":"Response Formats","text":""},{"location":"api/#success-response","title":"Success Response","text":"<pre><code>{\n  \"status\": \"success\",\n  \"data\": { ... }\n}\n</code></pre>"},{"location":"api/#error-response","title":"Error Response","text":"<pre><code>{\n  \"status\": \"error\",\n  \"message\": \"Error description\"\n}\n</code></pre>"},{"location":"api/#next-steps","title":"Next Steps","text":"<ul> <li>Endpoints - Detailed endpoint documentation</li> <li>Examples - Integration examples</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#api-authentication","title":"API Authentication","text":"<p>Authentication methods for TrikuSec API.</p>"},{"location":"api/authentication/#license-key-authentication","title":"License Key Authentication","text":"<p>Lynis endpoints use license key authentication via form data.</p>"},{"location":"api/authentication/#upload-endpoint","title":"Upload Endpoint","text":"<pre><code>curl -X POST https://yourserver:3000/api/lynis/upload/ \\\n  -F \"licensekey=your-license-key\" \\\n  -F \"hostid=server-01\" \\\n  -F \"data=...\"\n</code></pre>"},{"location":"api/authentication/#license-check-endpoint","title":"License Check Endpoint","text":"<pre><code>curl -X POST https://yourserver:3000/api/lynis/license/ \\\n  -F \"licensekey=your-license-key\"\n</code></pre>"},{"location":"api/authentication/#session-authentication","title":"Session Authentication","text":"<p>For web-based API access, use Django session authentication:</p> <ol> <li>Login via web interface</li> <li>Use session cookie in API requests</li> </ol> <pre><code>curl -X GET https://yourserver:3000/api/devices/ \\\n  -H \"Cookie: sessionid=your-session-id\"\n</code></pre>"},{"location":"api/authentication/#api-key-authentication","title":"API Key Authentication","text":"<p>API key authentication (coming soon) for programmatic access.</p>"},{"location":"api/authentication/#security-best-practices","title":"Security Best Practices","text":"<ul> <li>Use HTTPS - Always use HTTPS in production</li> <li>Protect License Keys - Never expose license keys in logs or version control</li> <li>Rotate Keys - Regularly rotate license keys</li> <li>Rate Limiting - Be aware of rate limits on API endpoints</li> </ul>"},{"location":"api/authentication/#troubleshooting","title":"Troubleshooting","text":""},{"location":"api/authentication/#invalid-license-key","title":"Invalid License Key","text":"<p>If you get <code>401 Unauthorized</code>:</p> <ol> <li>Verify the license key is correct</li> <li>Check that the license key exists in TrikuSec</li> <li>Ensure the license key hasn't been revoked</li> </ol>"},{"location":"api/authentication/#connection-issues","title":"Connection Issues","text":"<p>If you can't connect:</p> <ol> <li>Check server URL is correct</li> <li>Verify firewall allows connections</li> <li>Check SSL certificate (use <code>--insecure</code> for self-signed certs)</li> </ol>"},{"location":"api/authentication/#next-steps","title":"Next Steps","text":"<ul> <li>Endpoints - See all available endpoints</li> <li>Examples - Integration examples</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"api/endpoints/","title":"Endpoints","text":""},{"location":"api/endpoints/#api-endpoints","title":"API Endpoints","text":"<p>Complete reference for all API endpoints.</p>"},{"location":"api/endpoints/#lynis-endpoints","title":"Lynis Endpoints","text":""},{"location":"api/endpoints/#upload-report","title":"Upload Report","text":"<p>Upload a Lynis audit report.</p> <p>Endpoint: <code>POST /api/lynis/upload/</code></p> <p>Legacy: <code>POST /api/v1/lynis/upload/</code></p> <p>Request Format: Form data</p> <p>Parameters:</p> Parameter Type Required Description <code>licensekey</code> string Yes License key for authentication <code>hostid</code> string Yes Host identifier <code>hostid2</code> string No Secondary host identifier <code>data</code> string Yes Base64-encoded Lynis report data <p>Response:</p> <ul> <li><code>200 OK</code> - Report uploaded successfully</li> <li><code>400 Bad Request</code> - Invalid request data</li> <li><code>401 Unauthorized</code> - Invalid license key</li> </ul> <p>Example:</p> <pre><code>curl -X POST https://yourserver:3000/api/lynis/upload/ \\\n  -F \"licensekey=your-license-key\" \\\n  -F \"hostid=server-01\" \\\n  -F \"data=$(base64 -w 0 /var/log/lynis-report.dat)\"\n</code></pre>"},{"location":"api/endpoints/#check-license","title":"Check License","text":"<p>Validate a license key.</p> <p>Endpoint: <code>POST /api/lynis/license/</code></p> <p>Legacy: <code>POST /api/v1/lynis/license/</code></p> <p>Request Format: Form data</p> <p>Parameters:</p> Parameter Type Required Description <code>licensekey</code> string Yes License key to validate <code>collector_version</code> string No Lynis collector version <p>Response:</p> <ul> <li><code>200 OK</code> - Valid license (Response: <code>Response 100</code>)</li> <li><code>401 Unauthorized</code> - Invalid license (Response: <code>Response 500</code>)</li> </ul> <p>Example:</p> <pre><code>curl -X POST https://yourserver:3000/api/lynis/license/ \\\n  -F \"licensekey=your-license-key\" \\\n  -F \"collector_version=3.0.0\"\n</code></pre> <p>Lynis Compatibility</p> <p>These endpoints maintain compatibility with Lynis clients. The response format (<code>Response 100</code> / <code>Response 500</code>) is required for Lynis compatibility.</p>"},{"location":"api/endpoints/#device-endpoints","title":"Device Endpoints","text":""},{"location":"api/endpoints/#list-devices","title":"List Devices","text":"<p>Get a list of all devices.</p> <p>Endpoint: <code>GET /api/devices/</code></p> <p>Authentication: Required (session or API key)</p> <p>Response:</p> <pre><code>{\n  \"devices\": [\n    {\n      \"id\": 1,\n      \"hostid\": \"server-01\",\n      \"licensekey\": \"xxx\",\n      \"last_report\": \"2024-01-15T10:30:00Z\",\n      \"compliance\": 85.5\n    }\n  ]\n}\n</code></pre>"},{"location":"api/endpoints/#get-device","title":"Get Device","text":"<p>Get details for a specific device.</p> <p>Endpoint: <code>GET /api/devices/{id}/</code></p> <p>Authentication: Required</p> <p>Response:</p> <pre><code>{\n  \"id\": 1,\n  \"hostid\": \"server-01\",\n  \"licensekey\": \"xxx\",\n  \"last_report\": \"2024-01-15T10:30:00Z\",\n  \"compliance\": 85.5,\n  \"warnings\": [...],\n  \"suggestions\": [...]\n}\n</code></pre>"},{"location":"api/endpoints/#policy-endpoints","title":"Policy Endpoints","text":""},{"location":"api/endpoints/#list-policies","title":"List Policies","text":"<p>Get a list of all policy rules.</p> <p>Endpoint: <code>GET /api/policies/rules/</code></p> <p>Authentication: Required</p>"},{"location":"api/endpoints/#create-policy-rule","title":"Create Policy Rule","text":"<p>Create a new policy rule.</p> <p>Endpoint: <code>POST /api/policies/rules/</code></p> <p>Authentication: Required</p> <p>Request:</p> <pre><code>{\n  \"test_id\": \"FILE-7524\",\n  \"operator\": \"equals\",\n  \"value\": \"640\",\n  \"severity\": \"warning\"\n}\n</code></pre>"},{"location":"api/endpoints/#report-endpoints","title":"Report Endpoints","text":""},{"location":"api/endpoints/#get-device-reports","title":"Get Device Reports","text":"<p>Get audit reports for a device.</p> <p>Endpoint: <code>GET /api/devices/{id}/reports/</code></p> <p>Authentication: Required</p> <p>Response:</p> <pre><code>{\n  \"reports\": [\n    {\n      \"id\": 1,\n      \"created_at\": \"2024-01-15T10:30:00Z\",\n      \"compliance\": 85.5,\n      \"warnings_count\": 5,\n      \"suggestions_count\": 12\n    }\n  ]\n}\n</code></pre>"},{"location":"api/endpoints/#error-codes","title":"Error Codes","text":"Code Description 200 Success 400 Bad Request - Invalid parameters 401 Unauthorized - Invalid or missing authentication 404 Not Found - Resource not found 500 Internal Server Error"},{"location":"api/endpoints/#next-steps","title":"Next Steps","text":"<ul> <li>Authentication - Learn about authentication</li> <li>Examples - See code examples</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"api/examples/","title":"Examples","text":""},{"location":"api/examples/#api-examples","title":"API Examples","text":"<p>Code examples and integration patterns for TrikuSec API.</p>"},{"location":"api/examples/#python-examples","title":"Python Examples","text":""},{"location":"api/examples/#upload-report","title":"Upload Report","text":"<pre><code>import requests\nimport base64\n\n# Read Lynis report\nwith open('/var/log/lynis-report.dat', 'rb') as f:\n    report_data = base64.b64encode(f.read()).decode('utf-8')\n\n# Upload to TrikuSec\nresponse = requests.post(\n    'https://yourserver:3000/api/lynis/upload/',\n    data={\n        'licensekey': 'your-license-key',\n        'hostid': 'server-01',\n        'data': report_data\n    },\n    verify=False  # For self-signed certificates\n)\n\nif response.status_code == 200:\n    print('Report uploaded successfully')\nelse:\n    print(f'Error: {response.text}')\n</code></pre>"},{"location":"api/examples/#check-license","title":"Check License","text":"<pre><code>import requests\n\nresponse = requests.post(\n    'https://yourserver:3000/api/lynis/license/',\n    data={\n        'licensekey': 'your-license-key',\n        'collector_version': '3.0.0'\n    },\n    verify=False\n)\n\nif response.text == 'Response 100':\n    print('License is valid')\nelse:\n    print('License is invalid')\n</code></pre>"},{"location":"api/examples/#get-devices","title":"Get Devices","text":"<pre><code>import requests\n\n# Using session authentication\nsession = requests.Session()\nsession.post(\n    'https://yourserver:3000/login/',\n    data={'username': 'admin', 'password': 'password'}\n)\n\nresponse = session.get('https://yourserver:3000/api/devices/')\ndevices = response.json()\n\nfor device in devices['devices']:\n    print(f\"Device: {device['hostid']}, Compliance: {device['compliance']}%\")\n</code></pre>"},{"location":"api/examples/#bash-examples","title":"Bash Examples","text":""},{"location":"api/examples/#upload-report-script","title":"Upload Report Script","text":"<pre><code>#!/bin/bash\n\nLICENSE_KEY=\"your-license-key\"\nSERVER=\"https://yourserver:3000\"\nHOSTID=$(hostname)\n\n# Read and encode report\nREPORT_DATA=$(base64 -w 0 /var/log/lynis-report.dat)\n\n# Upload report\ncurl -k -X POST \"${SERVER}/api/lynis/upload/\" \\\n  -F \"licensekey=${LICENSE_KEY}\" \\\n  -F \"hostid=${HOSTID}\" \\\n  -F \"data=${REPORT_DATA}\"\n\nif [ $? -eq 0 ]; then\n    echo \"Report uploaded successfully\"\nelse\n    echo \"Failed to upload report\"\n    exit 1\nfi\n</code></pre>"},{"location":"api/examples/#check-license-script","title":"Check License Script","text":"<pre><code>#!/bin/bash\n\nLICENSE_KEY=\"your-license-key\"\nSERVER=\"https://yourserver:3000\"\n\nRESPONSE=$(curl -k -s -X POST \"${SERVER}/api/lynis/license/\" \\\n  -F \"licensekey=${LICENSE_KEY}\")\n\nif [ \"$RESPONSE\" = \"Response 100\" ]; then\n    echo \"License is valid\"\n    exit 0\nelse\n    echo \"License is invalid\"\n    exit 1\nfi\n</code></pre>"},{"location":"api/examples/#integration-with-lynis","title":"Integration with Lynis","text":""},{"location":"api/examples/#custom-lynis-profile","title":"Custom Lynis Profile","text":"<p>Add to <code>/etc/lynis/custom.prf</code>:</p> <pre><code>upload=yes\nlicense-key=your-license-key\nupload-server=yourserver:3000/api/lynis\nupload-options=--insecure\n</code></pre>"},{"location":"api/examples/#automated-upload","title":"Automated Upload","text":"<p>Add to cron:</p> <pre><code># Run audit and upload daily at 2 AM\n0 2 * * * /usr/sbin/lynis audit system --upload --quick\n</code></pre>"},{"location":"api/examples/#error-handling","title":"Error Handling","text":""},{"location":"api/examples/#python-error-handling","title":"Python Error Handling","text":"<pre><code>import requests\nfrom requests.exceptions import RequestException\n\ntry:\n    response = requests.post(\n        'https://yourserver:3000/api/lynis/upload/',\n        data={'licensekey': 'key', 'hostid': 'host', 'data': '...'},\n        timeout=30,\n        verify=False\n    )\n    response.raise_for_status()\nexcept RequestException as e:\n    print(f'Request failed: {e}')\nexcept Exception as e:\n    print(f'Unexpected error: {e}')\n</code></pre>"},{"location":"api/examples/#best-practices","title":"Best Practices","text":"<ul> <li>Error Handling - Always handle errors gracefully</li> <li>Retry Logic - Implement retry logic for transient failures</li> <li>Logging - Log API calls for debugging</li> <li>Timeouts - Set appropriate timeouts</li> <li>SSL Verification - Use proper SSL certificates in production</li> </ul>"},{"location":"api/examples/#next-steps","title":"Next Steps","text":"<ul> <li>Endpoints - Complete endpoint reference</li> <li>Authentication - Authentication details</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"configuration/","title":"Index","text":""},{"location":"configuration/#configuration","title":"Configuration","text":"<p>This section covers all configuration options for TrikuSec.</p>"},{"location":"configuration/#configuration-areas","title":"Configuration Areas","text":"<ul> <li>Environment Variables - All available environment variables</li> <li>Security Settings - Security hardening and best practices</li> <li>Advanced Configuration - Advanced settings and customization</li> </ul>"},{"location":"configuration/#quick-reference","title":"Quick Reference","text":""},{"location":"configuration/#essential-variables","title":"Essential Variables","text":"<pre><code># Required\nSECRET_KEY=your-secret-key-here\n\n# Production\nDJANGO_DEBUG=False\nDJANGO_ALLOWED_HOSTS=yourdomain.com\n</code></pre>"},{"location":"configuration/#optional-variables","title":"Optional Variables","text":"<pre><code># Admin credentials\nTRIKUSEC_ADMIN_USERNAME=admin\nTRIKUSEC_ADMIN_PASSWORD=secure-password\n\n# Database (optional, defaults to SQLite)\nDATABASE_URL=postgresql://user:pass@host:5432/dbname\n\n# HTTPS Security\nSECURE_SSL_REDIRECT=True\nSECURE_HSTS_SECONDS=31536000\n</code></pre>"},{"location":"configuration/#configuration-files","title":"Configuration Files","text":"<p>TrikuSec uses environment variables for configuration. These can be set via:</p> <ol> <li><code>.env</code> file (recommended for local development)</li> <li>Docker Compose environment variables</li> <li>System environment variables</li> </ol>"},{"location":"configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Review Environment Variables for complete list</li> <li>Configure Security Settings for production</li> <li>Check Advanced Configuration for customization options</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"configuration/advanced/","title":"Advanced","text":""},{"location":"configuration/advanced/#advanced-configuration","title":"Advanced Configuration","text":"<p>Advanced configuration options and customization for TrikuSec.</p>"},{"location":"configuration/advanced/#custom-settings","title":"Custom Settings","text":""},{"location":"configuration/advanced/#logging-configuration","title":"Logging Configuration","text":"<p>Customize logging levels and handlers in Django settings.</p>"},{"location":"configuration/advanced/#static-files","title":"Static Files","text":"<p>Configure static file serving:</p> <pre><code># Collect static files\ndocker compose run --rm trikusec python manage.py collectstatic --no-input\n</code></pre>"},{"location":"configuration/advanced/#media-files","title":"Media Files","text":"<p>Configure media file storage and serving.</p>"},{"location":"configuration/advanced/#api-configuration","title":"API Configuration","text":""},{"location":"configuration/advanced/#api-versioning","title":"API Versioning","text":"<p>TrikuSec supports API versioning:</p> <ul> <li>Versioned API: <code>/api/v1/lynis/upload/</code>, <code>/api/v1/lynis/license/</code></li> <li>Legacy API: <code>/api/lynis/upload/</code>, <code>/api/lynis/license/</code></li> </ul> <p>Both endpoints route to the same views for backward compatibility.</p>"},{"location":"configuration/advanced/#rate-limiting","title":"Rate Limiting","text":"<p>Customize rate limits per endpoint in Django settings.</p>"},{"location":"configuration/advanced/#database-optimization","title":"Database Optimization","text":""},{"location":"configuration/advanced/#connection-pooling","title":"Connection Pooling","text":"<p>For PostgreSQL, configure connection pooling:</p> <pre><code>DATABASES = {\n    'default': {\n        'CONN_MAX_AGE': 600,  # Persistent connections\n    }\n}\n</code></pre>"},{"location":"configuration/advanced/#indexes","title":"Indexes","text":"<p>TrikuSec includes performance indexes on frequently queried fields. See migrations for details.</p>"},{"location":"configuration/advanced/#custom-policies","title":"Custom Policies","text":""},{"location":"configuration/advanced/#policy-rules","title":"Policy Rules","text":"<p>Define custom policy rules through the web interface or API.</p>"},{"location":"configuration/advanced/#policy-rule-sets","title":"Policy Rule Sets","text":"<p>Create rule sets to apply multiple policies to devices.</p>"},{"location":"configuration/advanced/#integration","title":"Integration","text":""},{"location":"configuration/advanced/#webhooks","title":"Webhooks","text":"<p>Configure webhooks for events (coming soon).</p>"},{"location":"configuration/advanced/#api-integration","title":"API Integration","text":"<p>Integrate TrikuSec with other tools using the REST API.</p>"},{"location":"configuration/advanced/#performance-tuning","title":"Performance Tuning","text":""},{"location":"configuration/advanced/#caching","title":"Caching","text":"<p>Configure caching for better performance:</p> <pre><code>CACHES = {\n    'default': {\n        'BACKEND': 'django.core.cache.backends.redis.RedisCache',\n        'LOCATION': 'redis://127.0.0.1:6379/1',\n    }\n}\n</code></pre>"},{"location":"configuration/advanced/#database-queries","title":"Database Queries","text":"<p>Monitor and optimize database queries:</p> <pre><code># Enable query logging\nDJANGO_DEBUG=True  # Development only\n</code></pre>"},{"location":"configuration/advanced/#customization","title":"Customization","text":""},{"location":"configuration/advanced/#branding","title":"Branding","text":"<p>Customize logos and branding in templates.</p>"},{"location":"configuration/advanced/#themes","title":"Themes","text":"<p>Modify CSS and templates for custom appearance.</p>"},{"location":"configuration/advanced/#troubleshooting","title":"Troubleshooting","text":""},{"location":"configuration/advanced/#debug-mode","title":"Debug Mode","text":"<p>For troubleshooting, temporarily enable debug mode:</p> <pre><code>DJANGO_DEBUG=True\n</code></pre> <p>Development Only</p> <p>Never enable debug mode in production.</p>"},{"location":"configuration/advanced/#database-shell","title":"Database Shell","text":"<p>Access database directly:</p> <pre><code>docker compose exec trikusec python manage.py dbshell\n</code></pre>"},{"location":"configuration/advanced/#django-shell","title":"Django Shell","text":"<p>Interactive Python shell:</p> <pre><code>docker compose exec trikusec python manage.py shell\n</code></pre>"},{"location":"configuration/advanced/#additional-resources","title":"Additional Resources","text":"<ul> <li>Django Settings Reference</li> <li>Django Deployment Checklist</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"configuration/environment-variables/","title":"Environment variables","text":""},{"location":"configuration/environment-variables/#environment-variables","title":"Environment Variables","text":"<p>Complete reference of all environment variables used by TrikuSec.</p>"},{"location":"configuration/environment-variables/#required-variables","title":"Required Variables","text":""},{"location":"configuration/environment-variables/#secret_key","title":"SECRET_KEY","text":"<p>Django secret key for cryptographic signing.</p> <pre><code>SECRET_KEY=your-secret-key-here\n</code></pre> <p>Security Critical</p> <p>NEVER commit your actual secret key to version control. Generate a new unique key for each deployment.</p> <p>Generate a secure key: <pre><code>python3 -c \"import secrets; print(secrets.token_urlsafe(50))\"\n</code></pre></p>"},{"location":"configuration/environment-variables/#django-settings","title":"Django Settings","text":""},{"location":"configuration/environment-variables/#django_debug","title":"DJANGO_DEBUG","text":"<p>Enable or disable Django debug mode.</p> <pre><code>DJANGO_DEBUG=False  # Production (default)\nDJANGO_DEBUG=True   # Development only\n</code></pre> <p>Never Enable in Production</p> <p>Setting <code>DJANGO_DEBUG=True</code> in production exposes sensitive information including stack traces, environment variables, and database queries.</p>"},{"location":"configuration/environment-variables/#django_allowed_hosts","title":"DJANGO_ALLOWED_HOSTS","text":"<p>Comma-separated list of allowed hostnames.</p> <pre><code>DJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com\n</code></pre> <p>For development, you can use: <pre><code>DJANGO_ALLOWED_HOSTS=*\n</code></pre></p> <p>Production Security</p> <p>Never use <code>*</code> in production. Always specify exact hostnames.</p>"},{"location":"configuration/environment-variables/#django_env","title":"DJANGO_ENV","text":"<p>Environment type selector.</p> <pre><code>DJANGO_ENV=development   # Development settings (default)\nDJANGO_ENV=production    # Production settings\nDJANGO_ENV=testing       # Testing settings\n</code></pre>"},{"location":"configuration/environment-variables/#database-configuration","title":"Database Configuration","text":""},{"location":"configuration/environment-variables/#database_url","title":"DATABASE_URL","text":"<p>Database connection URL. Defaults to SQLite if not set.</p> <pre><code># PostgreSQL\nDATABASE_URL=postgresql://user:password@host:5432/dbname\n\n# SQLite (default)\n# DATABASE_URL not set or empty\n</code></pre>"},{"location":"configuration/environment-variables/#admin-configuration","title":"Admin Configuration","text":""},{"location":"configuration/environment-variables/#trikusec_admin_username","title":"TRIKUSEC_ADMIN_USERNAME","text":"<p>Default admin username.</p> <pre><code>TRIKUSEC_ADMIN_USERNAME=admin\n</code></pre>"},{"location":"configuration/environment-variables/#trikusec_admin_password","title":"TRIKUSEC_ADMIN_PASSWORD","text":"<p>Default admin password.</p> <pre><code>TRIKUSEC_ADMIN_PASSWORD=secure-password\n</code></pre> <p>Change Default Password</p> <p>Always change the default admin password in production.</p>"},{"location":"configuration/environment-variables/#https-security","title":"HTTPS Security","text":""},{"location":"configuration/environment-variables/#secure_ssl_redirect","title":"SECURE_SSL_REDIRECT","text":"<p>Redirect all HTTP traffic to HTTPS.</p> <pre><code>SECURE_SSL_REDIRECT=True\n</code></pre>"},{"location":"configuration/environment-variables/#secure_hsts_seconds","title":"SECURE_HSTS_SECONDS","text":"<p>HTTP Strict Transport Security (HSTS) duration in seconds.</p> <pre><code>SECURE_HSTS_SECONDS=31536000  # 1 year\n</code></pre>"},{"location":"configuration/environment-variables/#session_cookie_secure","title":"SESSION_COOKIE_SECURE","text":"<p>Only send session cookies over HTTPS.</p> <pre><code>SESSION_COOKIE_SECURE=True\n</code></pre>"},{"location":"configuration/environment-variables/#csrf_cookie_secure","title":"CSRF_COOKIE_SECURE","text":"<p>Only send CSRF cookies over HTTPS.</p> <pre><code>CSRF_COOKIE_SECURE=True\n</code></pre>"},{"location":"configuration/environment-variables/#rate-limiting","title":"Rate Limiting","text":""},{"location":"configuration/environment-variables/#ratelimit_enable","title":"RATELIMIT_ENABLE","text":"<p>Enable or disable rate limiting on API endpoints.</p> <pre><code>RATELIMIT_ENABLE=True   # Enabled (default)\nRATELIMIT_ENABLE=False  # Disabled\n</code></pre>"},{"location":"configuration/environment-variables/#server-configuration","title":"Server Configuration","text":""},{"location":"configuration/environment-variables/#trikusec_url","title":"TRIKUSEC_URL","text":"<p>TrikuSec admin UI server URL (used for generating admin interface links).</p> <pre><code>TRIKUSEC_URL=https://localhost:443\n</code></pre> <p>This is the endpoint used for accessing the web management interface. It should point to your nginx reverse proxy or direct Django server for admin access.</p> <p>In the enrollment workflow, <code>TRIKUSEC_URL</code> is used for: - Downloading <code>enroll.sh</code> script - Downloading lynis custom profile</p>"},{"location":"configuration/environment-variables/#trikusec_lynis_api_url","title":"TRIKUSEC_LYNIS_API_URL","text":"<p>TrikuSec Lynis API server URL (used for device enrollment and report uploads).</p> <pre><code>TRIKUSEC_LYNIS_API_URL=https://localhost:8443\n</code></pre> <p>This is the endpoint used by monitored servers for: - Downloading self-signed certificate (via openssl) - License validation (<code>/api/lynis/license/</code>) - Uploading audit reports (<code>/api/lynis/upload/</code>)</p> <p>If not set, falls back to <code>TRIKUSEC_URL</code> for backward compatibility.</p> <p>Security Best Practice</p> <p>Use separate endpoints for admin UI and Lynis API to improve security. This allows you to configure different firewall rules for each endpoint. See Security Configuration for details.</p>"},{"location":"configuration/environment-variables/#example-env-file","title":"Example .env File","text":"<pre><code># Required\nSECRET_KEY=your-generated-secret-key-here\n\n# Django\nDJANGO_DEBUG=False\nDJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com\nDJANGO_ENV=production\n\n# Database\nDATABASE_URL=postgresql://trikusec_user:password@postgres:5432/trikusec\n\n# Admin\nTRIKUSEC_ADMIN_USERNAME=admin\nTRIKUSEC_ADMIN_PASSWORD=your-secure-password\n\n# HTTPS\nSECURE_SSL_REDIRECT=True\nSECURE_HSTS_SECONDS=31536000\nSESSION_COOKIE_SECURE=True\nCSRF_COOKIE_SECURE=True\n\n# Rate Limiting\nRATELIMIT_ENABLE=True\n\n# Server\nTRIKUSEC_URL=https://yourdomain.com:443\nTRIKUSEC_LYNIS_API_URL=https://yourdomain.com:8443\n</code></pre> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"configuration/security/","title":"Security","text":""},{"location":"configuration/security/#security-configuration","title":"Security Configuration","text":"<p>Security best practices and hardening guide for TrikuSec.</p>"},{"location":"configuration/security/#production-security-checklist","title":"Production Security Checklist","text":"<ul> <li> <code>DJANGO_DEBUG=False</code> is set</li> <li> <code>DJANGO_ALLOWED_HOSTS</code> is configured (not <code>*</code>)</li> <li> <code>SECRET_KEY</code> is unique and secure</li> <li> Default admin password is changed</li> <li> HTTPS is enabled with security headers</li> <li> Rate limiting is enabled</li> <li> PostgreSQL is used (not SQLite)</li> <li> Regular backups are configured</li> </ul>"},{"location":"configuration/security/#critical-security-settings","title":"Critical Security Settings","text":""},{"location":"configuration/security/#debug-mode","title":"Debug Mode","text":"<p>Critical</p> <p>NEVER enable debug mode in production.</p> <pre><code>DJANGO_DEBUG=False\n</code></pre> <p>Debug mode exposes: - Stack traces with code - Environment variables - Database queries - Internal file paths</p>"},{"location":"configuration/security/#allowed-hosts","title":"Allowed Hosts","text":"<p>Always specify exact hostnames:</p> <pre><code>DJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com\n</code></pre> <p>Never use: <pre><code>DJANGO_ALLOWED_HOSTS=*  # INSECURE\n</code></pre></p>"},{"location":"configuration/security/#secret-key","title":"Secret Key","text":"<p>Generate a unique, secure secret key for each deployment:</p> <pre><code>python3 -c \"import secrets; print(secrets.token_urlsafe(50))\"\n</code></pre> <p>Never reuse secret keys across deployments.</p>"},{"location":"configuration/security/#https-configuration","title":"HTTPS Configuration","text":""},{"location":"configuration/security/#enable-https-redirect","title":"Enable HTTPS Redirect","text":"<pre><code>SECURE_SSL_REDIRECT=True\n</code></pre>"},{"location":"configuration/security/#http-strict-transport-security-hsts","title":"HTTP Strict Transport Security (HSTS)","text":"<pre><code>SECURE_HSTS_SECONDS=31536000  # 1 year\nSECURE_HSTS_INCLUDE_SUBDOMAINS=True\nSECURE_HSTS_PRELOAD=True\n</code></pre>"},{"location":"configuration/security/#secure-cookies","title":"Secure Cookies","text":"<pre><code>SESSION_COOKIE_SECURE=True\nCSRF_COOKIE_SECURE=True\n</code></pre>"},{"location":"configuration/security/#rate-limiting","title":"Rate Limiting","text":"<p>Enable rate limiting to protect against abuse:</p> <pre><code>RATELIMIT_ENABLE=True\n</code></pre> <p>Rate limits apply to: - API endpoints (<code>/api/lynis/upload/</code>, <code>/api/lynis/license/</code>) - Login attempts - Registration attempts</p>"},{"location":"configuration/security/#database-security","title":"Database Security","text":""},{"location":"configuration/security/#use-postgresql-in-production","title":"Use PostgreSQL in Production","text":"<p>SQLite is fine for development, but PostgreSQL provides: - Better concurrency - Connection pooling - Better security features</p> <p>See PostgreSQL Setup for details.</p>"},{"location":"configuration/security/#database-credentials","title":"Database Credentials","text":"<ul> <li>Use strong passwords</li> <li>Limit database user permissions</li> <li>Use connection encryption</li> <li>Regularly rotate credentials</li> </ul>"},{"location":"configuration/security/#authentication-security","title":"Authentication Security","text":""},{"location":"configuration/security/#change-default-credentials","title":"Change Default Credentials","text":"<p>Never use default admin credentials in production:</p> <pre><code>TRIKUSEC_ADMIN_USERNAME=admin\nTRIKUSEC_ADMIN_PASSWORD=your-strong-password-here\n</code></pre>"},{"location":"configuration/security/#password-requirements","title":"Password Requirements","text":"<p>Ensure strong passwords: - Minimum 12 characters - Mix of uppercase, lowercase, numbers, symbols - Not dictionary words - Not reused from other services</p>"},{"location":"configuration/security/#network-security","title":"Network Security","text":""},{"location":"configuration/security/#api-endpoint-separation-architecture","title":"API Endpoint Separation Architecture","text":"<p>TrikuSec uses a dual-endpoint architecture to improve security by separating admin UI access from Lynis API access:</p> <ul> <li>Admin UI Endpoint (<code>TRIKUSEC_URL</code>, default: <code>https://localhost:443</code>): </li> <li>Used for accessing the web management interface</li> <li>Used for downloading <code>enroll.sh</code> and custom profile during enrollment</li> <li>Requires authentication (login required)</li> <li>Should only be accessible to sysadmins</li> <li> <p>Typically accessed on port 443 via nginx reverse proxy</p> </li> <li> <p>Lynis API Endpoint (<code>TRIKUSEC_LYNIS_API_URL</code>, default: <code>https://localhost:8443</code>):</p> </li> <li>Used by monitored servers for certificate download, license validation, and report uploads</li> <li>No authentication UI exposed (API-only endpoints)</li> <li>Should be accessible from your server network</li> <li>Typically accessed on a separate port (e.g., 8443) via nginx</li> </ul>"},{"location":"configuration/security/#security-benefits","title":"Security Benefits","text":"<p>This separation provides important security advantages:</p> <ol> <li> <p>Compromised Server Isolation: If a monitored server is compromised, the attacker cannot access the admin UI or authentication forms, even if they can upload reports to the API.</p> </li> <li> <p>Firewall Rule Granularity: Sysadmins can configure different firewall rules:</p> </li> <li>Admin UI: Restrict access to corporate IPs, VPN networks, or specific admin workstations</li> <li> <p>Lynis API: Allow access from server networks, data centers, or cloud provider IP ranges</p> </li> <li> <p>Attack Surface Reduction: The admin interface is not exposed to the same network as monitored servers, reducing the risk of credential theft or session hijacking.</p> </li> </ol>"},{"location":"configuration/security/#example-firewall-configuration","title":"Example Firewall Configuration","text":"<pre><code># Allow admin UI access only from corporate network\niptables -A INPUT -p tcp --dport 443 -s 10.0.0.0/8 -j ACCEPT\niptables -A INPUT -p tcp --dport 443 -j DROP\n\n# Allow Lynis API access from server network\niptables -A INPUT -p tcp --dport 8443 -s 192.168.1.0/24 -j ACCEPT\niptables -A INPUT -p tcp --dport 8443 -j DROP\n</code></pre>"},{"location":"configuration/security/#configuration","title":"Configuration","text":"<p>Set <code>TRIKUSEC_LYNIS_API_URL</code> to your Lynis API endpoint. If not set, it falls back to <code>TRIKUSEC_URL</code> for backward compatibility.</p> <p>See Environment Variables for configuration details.</p>"},{"location":"configuration/security/#firewall-configuration","title":"Firewall Configuration","text":"<p>Only expose necessary ports: - <code>443</code> (or your configured port) for Admin UI HTTP/HTTPS - <code>8443</code> (or your configured port) for Lynis API HTTP/HTTPS - Database port only to application server (if external)</p>"},{"location":"configuration/security/#reverse-proxy","title":"Reverse Proxy","text":"<p>Use a reverse proxy (Nginx, Apache) for: - SSL/TLS termination - Additional security headers - Rate limiting - DDoS protection</p>"},{"location":"configuration/security/#security-headers","title":"Security Headers","text":"<p>TrikuSec includes security headers, but you can add more via reverse proxy:</p> <pre><code>X-Content-Type-Options: nosniff\nX-Frame-Options: DENY\nX-XSS-Protection: 1; mode=block\nContent-Security-Policy: default-src 'self'\n</code></pre>"},{"location":"configuration/security/#regular-updates","title":"Regular Updates","text":"<ul> <li>Keep Django and dependencies updated</li> <li>Monitor security advisories</li> <li>Apply security patches promptly</li> <li>Review and update regularly</li> </ul>"},{"location":"configuration/security/#backup-and-recovery","title":"Backup and Recovery","text":"<ul> <li>Regular database backups</li> <li>Test restore procedures</li> <li>Store backups securely</li> <li>Encrypt backup files</li> </ul>"},{"location":"configuration/security/#monitoring-and-logging","title":"Monitoring and Logging","text":"<ul> <li>Monitor access logs</li> <li>Set up alerts for suspicious activity</li> <li>Review logs regularly</li> <li>Use centralized logging for production</li> </ul>"},{"location":"configuration/security/#additional-resources","title":"Additional Resources","text":"<ul> <li>Django Security Documentation</li> <li>OWASP Top 10</li> <li>CIS Benchmarks</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/","title":"Index","text":""},{"location":"development/#development","title":"Development","text":"<p>Guide for developers contributing to TrikuSec.</p>"},{"location":"development/#development-areas","title":"Development Areas","text":"<ul> <li>Setup - Setting up development environment</li> <li>Testing - Running and writing tests</li> <li>UI/UX Architecture - Frontend patterns and best practices</li> <li>Contributing - Contribution guidelines</li> </ul>"},{"location":"development/#development-environment","title":"Development Environment","text":"<p>TrikuSec development happens entirely in Docker containers - no local Python installation required.</p>"},{"location":"development/#quick-start","title":"Quick Start","text":"<ol> <li>Clone the repository</li> <li>Set up environment variables</li> <li>Start development services</li> <li>Run tests</li> </ol>"},{"location":"development/#project-structure","title":"Project Structure","text":"<ul> <li><code>src/api/</code> - API application</li> <li><code>src/frontend/</code> - Frontend application</li> <li><code>src/trikusec/</code> - Django project settings</li> <li><code>src/conftest.py</code> - Pytest fixtures</li> <li><code>tests/</code> - Test files</li> </ul>"},{"location":"development/#development-workflow","title":"Development Workflow","text":"<ol> <li>Create a feature branch</li> <li>Make changes</li> <li>Write/update tests</li> <li>Run tests</li> <li>Submit pull request</li> </ol>"},{"location":"development/#next-steps","title":"Next Steps","text":"<ul> <li>Development Setup - Get started with development</li> <li>Testing Guide - Learn about testing</li> <li>UI/UX Architecture - Understand frontend patterns</li> <li>Contributing - Contribution guidelines</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/contributing/","title":"Contributing","text":""},{"location":"development/contributing/#contributing","title":"Contributing","text":"<p>Thank you for your interest in contributing to TrikuSec!</p>"},{"location":"development/contributing/#how-to-contribute","title":"How to Contribute","text":""},{"location":"development/contributing/#reporting-issues","title":"Reporting Issues","text":"<ul> <li>Use GitHub Issues to report bugs</li> <li>Include steps to reproduce</li> <li>Provide environment details</li> <li>Include relevant logs</li> </ul>"},{"location":"development/contributing/#suggesting-features","title":"Suggesting Features","text":"<ul> <li>Open a GitHub Issue with the \"enhancement\" label</li> <li>Describe the use case</li> <li>Explain the expected behavior</li> </ul>"},{"location":"development/contributing/#submitting-code","title":"Submitting Code","text":"<ol> <li>Fork the Repository</li> <li>Create a Feature Branch <pre><code>git checkout -b feature/your-feature-name\n</code></pre></li> <li>Make Changes</li> <li>Follow code style guidelines</li> <li>Write/update tests</li> <li>Update documentation</li> <li>Run Tests <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test\n</code></pre></li> <li>Commit Changes</li> <li>Use clear commit messages</li> <li>Reference issue numbers if applicable</li> <li>Push and Create Pull Request</li> </ol>"},{"location":"development/contributing/#code-style","title":"Code Style","text":""},{"location":"development/contributing/#python","title":"Python","text":"<ul> <li>Follow PEP 8</li> <li>Use type hints where appropriate</li> <li>Keep functions focused and small</li> <li>Write docstrings for public functions</li> </ul>"},{"location":"development/contributing/#django","title":"Django","text":"<ul> <li>Follow Django best practices</li> <li>Use Django's built-in features</li> <li>Keep views thin, models fat</li> <li>Use forms for validation</li> </ul>"},{"location":"development/contributing/#testing","title":"Testing","text":"<ul> <li>Write tests for new features</li> <li>Maintain or improve test coverage</li> <li>Use descriptive test names</li> <li>Keep tests fast and isolated</li> </ul>"},{"location":"development/contributing/#development-guidelines","title":"Development Guidelines","text":""},{"location":"development/contributing/#critical-api-endpoints","title":"Critical API Endpoints","text":"<p>Do Not Break</p> <p>These endpoints must remain unchanged for Lynis compatibility: - <code>/api/lynis/upload/</code> - <code>/api/lynis/license/</code></p>"},{"location":"development/contributing/#docker-commands","title":"Docker Commands","text":"<p>Always use <code>docker compose</code> (with space), never <code>docker-compose</code> (with hyphen).</p>"},{"location":"development/contributing/#security","title":"Security","text":"<ul> <li>Never commit secrets</li> <li>Review security implications</li> <li>Follow security best practices</li> <li>Test security features</li> </ul>"},{"location":"development/contributing/#pull-request-process","title":"Pull Request Process","text":"<ol> <li>Ensure Tests Pass - All tests must pass</li> <li>Update Documentation - Update relevant docs</li> <li>Describe Changes - Clear description in PR</li> <li>Reference Issues - Link to related issues</li> <li>Wait for Review - Address review comments</li> </ol>"},{"location":"development/contributing/#code-review","title":"Code Review","text":"<ul> <li>Be respectful and constructive</li> <li>Focus on code, not people</li> <li>Explain reasoning</li> <li>Be open to feedback</li> </ul>"},{"location":"development/contributing/#questions","title":"Questions?","text":"<ul> <li>Open a GitHub Issue</li> <li>Check existing documentation</li> <li>Review code comments</li> </ul> <p>Thank you for contributing to TrikuSec!</p> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/e2e-testing/","title":"E2e testing","text":""},{"location":"development/e2e-testing/#e2e-testing-with-playwright","title":"E2E Testing with Playwright","text":"<p>This document describes how to run and maintain end-to-end (E2E) tests for the TrikuSec frontend using Playwright.</p>"},{"location":"development/e2e-testing/#overview","title":"Overview","text":"<p>E2E tests verify the complete user experience by testing the frontend in a real browser environment. The tests cover:</p> <ul> <li>Ruleset CRUD operations (create, edit, delete)</li> <li>Rule CRUD operations (create, edit, delete)</li> <li>Device detail page interactions</li> <li>Sidebar state management and nested sidebar behavior</li> <li>AJAX form submissions</li> <li>Dialog confirmations</li> </ul>"},{"location":"development/e2e-testing/#running-e2e-tests","title":"Running E2E Tests","text":""},{"location":"development/e2e-testing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose installed</li> <li>TrikuSec service running (for E2E tests that need the live server)</li> </ul>"},{"location":"development/e2e-testing/#running-all-e2e-tests","title":"Running All E2E Tests","text":"<p>Run all E2E tests in headless mode:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test-e2e\n</code></pre>"},{"location":"development/e2e-testing/#running-specific-tests","title":"Running Specific Tests","text":"<p>Run a specific test file:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test-e2e \\\n  pytest frontend/tests_e2e.py -v\n</code></pre> <p>Run a specific test:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test-e2e \\\n  pytest frontend/tests_e2e.py::TestRulesetCRUD::test_create_ruleset_basic -v\n</code></pre>"},{"location":"development/e2e-testing/#running-tests-with-html-report","title":"Running Tests with HTML Report","text":"<p>Generate an HTML report:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test-e2e \\\n  pytest -v -m e2e --html=e2e-report.html --self-contained-html\n</code></pre> <p>The report will be saved in <code>src/e2e-report.html</code>.</p>"},{"location":"development/e2e-testing/#running-tests-in-headed-mode-for-debugging","title":"Running Tests in Headed Mode (for Debugging)","text":"<p>To see the browser while tests run, you'll need to modify the test container to run in non-headless mode. This requires changes to the test configuration or running tests locally.</p>"},{"location":"development/e2e-testing/#test-structure","title":"Test Structure","text":""},{"location":"development/e2e-testing/#test-files","title":"Test Files","text":"<ul> <li><code>src/frontend/tests_e2e.py</code>: Main E2E test suite</li> <li><code>src/frontend/conftest_e2e.py</code>: E2E-specific fixtures</li> </ul>"},{"location":"development/e2e-testing/#test-classes","title":"Test Classes","text":"<ul> <li><code>TestRulesetCRUD</code>: Tests for ruleset create, edit, delete operations</li> <li><code>TestRuleCRUD</code>: Tests for rule create, edit, delete operations</li> <li><code>TestDeviceDetailInteractions</code>: Tests for device detail page interactions</li> <li><code>TestSidebarStateManagement</code>: Tests for sidebar state and nested sidebar behavior</li> </ul>"},{"location":"development/e2e-testing/#fixtures","title":"Fixtures","text":"<ul> <li><code>authenticated_browser</code>: Provides a logged-in browser session</li> <li><code>test_policy_data</code>: Creates sample rules and rulesets for testing</li> <li><code>test_device_with_rulesets</code>: Creates a device with assigned rulesets</li> <li><code>live_server_url</code>: Provides the URL of the Django test server</li> </ul>"},{"location":"development/e2e-testing/#writing-new-e2e-tests","title":"Writing New E2E Tests","text":""},{"location":"development/e2e-testing/#basic-test-structure","title":"Basic Test Structure","text":"<pre><code>@pytest.mark.e2e\ndef test_my_feature(authenticated_browser, live_server_url):\n    \"\"\"Test description.\"\"\"\n    page = authenticated_browser\n\n    # Navigate to page\n    page.goto(f\"{live_server_url}/policies/\")\n    page.wait_for_load_state(\"networkidle\")\n\n    # Interact with page\n    page.click('button:has-text(\"New Ruleset\")')\n\n    # Assert results\n    assert page.locator('text=Expected Text').is_visible()\n</code></pre>"},{"location":"development/e2e-testing/#best-practices","title":"Best Practices","text":"<ol> <li>Use descriptive test names: Test names should clearly describe what they test</li> <li>Wait for elements: Always wait for elements to be visible/ready before interacting</li> <li>Use data-testid attributes: When possible, use stable selectors (consider adding <code>data-testid</code> to HTML)</li> <li>Test user flows: Focus on complete user workflows, not implementation details</li> <li>Keep tests independent: Each test should be able to run in isolation</li> <li>Use fixtures: Leverage fixtures for common setup (authentication, test data)</li> </ol>"},{"location":"development/e2e-testing/#common-patterns","title":"Common Patterns","text":""},{"location":"development/e2e-testing/#waiting-for-sidebars","title":"Waiting for Sidebars","text":"<pre><code>sidebar = page.locator('#ruleset-edit-panel')\nsidebar.wait_for(state=\"visible\", timeout=5000)\n</code></pre>"},{"location":"development/e2e-testing/#filling-forms","title":"Filling Forms","text":"<pre><code>page.fill('#ruleset_name', 'Test Ruleset')\npage.fill('#ruleset_description', 'Test description')\n</code></pre>"},{"location":"development/e2e-testing/#handling-dialogs","title":"Handling Dialogs","text":"<pre><code>page.once(\"dialog\", lambda dialog: dialog.accept())\npage.click('button:has-text(\"Delete\")')\n</code></pre>"},{"location":"development/e2e-testing/#checking-visibility","title":"Checking Visibility","text":"<pre><code>assert page.locator('text=Expected Text').is_visible()\nassert page.locator('text=Should Not Exist').is_hidden()\n</code></pre>"},{"location":"development/e2e-testing/#debugging-failing-tests","title":"Debugging Failing Tests","text":""},{"location":"development/e2e-testing/#view-test-output","title":"View Test Output","text":"<p>E2E tests provide detailed output. Look for:</p> <ul> <li>Element not found errors</li> <li>Timeout errors</li> <li>Network errors</li> <li>JavaScript console errors</li> </ul>"},{"location":"development/e2e-testing/#common-issues","title":"Common Issues","text":"<ol> <li>Element not found: The selector might be incorrect or the element might not be loaded yet</li> <li> <p>Solution: Add explicit waits or check if the element exists before interacting</p> </li> <li> <p>Timeout errors: The page might be loading slowly or an action might be taking too long</p> </li> <li> <p>Solution: Increase timeout or add explicit waits</p> </li> <li> <p>Dialog not handled: If a test expects a dialog but it doesn't appear</p> </li> <li> <p>Solution: Check if the dialog handler is set up before clicking the button</p> </li> <li> <p>Sidebar state issues: Sidebars might not be in the expected state</p> </li> <li>Solution: Wait for sidebar animations to complete before interacting</li> </ol>"},{"location":"development/e2e-testing/#running-tests-locally-advanced","title":"Running Tests Locally (Advanced)","text":"<p>For advanced debugging, you can run tests locally:</p> <ol> <li> <p>Install dependencies:    <pre><code>pip install -r src/requirements-dev.txt\nplaywright install chromium\n</code></pre></p> </li> <li> <p>Set up environment:    <pre><code>export SECRET_KEY=test-secret-key\nexport DJANGO_ENV=testing\n</code></pre></p> </li> <li> <p>Run tests:    <pre><code>cd src\npytest frontend/tests_e2e.py -v\n</code></pre></p> </li> </ol>"},{"location":"development/e2e-testing/#cicd-integration","title":"CI/CD Integration","text":"<p>E2E tests run automatically in GitHub Actions after integration tests pass. The workflow:</p> <ol> <li>Builds the test image with Playwright</li> <li>Starts the TrikuSec service</li> <li>Waits for the service to be ready</li> <li>Runs E2E tests</li> <li>Uploads HTML test report as an artifact</li> <li>Fails the build if tests fail</li> </ol>"},{"location":"development/e2e-testing/#maintenance-guidelines","title":"Maintenance Guidelines","text":""},{"location":"development/e2e-testing/#when-to-update-tests","title":"When to Update Tests","text":"<ul> <li>UI changes: If you change UI structure (HTML, CSS classes, IDs), update selectors</li> <li>New features: Add E2E tests for new user-facing features</li> <li>Bug fixes: Add regression tests for fixed bugs</li> </ul>"},{"location":"development/e2e-testing/#selector-strategy","title":"Selector Strategy","text":"<ul> <li>Prefer stable selectors: Use IDs, data attributes, or text content</li> <li>Avoid CSS classes: CSS classes may change for styling reasons</li> <li>Use semantic selectors: Prefer <code>button:has-text(\"Save\")</code> over <code>button.btn-primary</code></li> </ul>"},{"location":"development/e2e-testing/#test-data","title":"Test Data","text":"<ul> <li>Use fixtures to create test data</li> <li>Clean up test data in fixtures (Django's test database is reset between tests)</li> <li>Use descriptive names for test data (e.g., \"Test Ruleset E2E\")</li> </ul>"},{"location":"development/e2e-testing/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/e2e-testing/#tests-fail-intermittently","title":"Tests Fail Intermittently","text":"<ul> <li>Timing issues: Add explicit waits for async operations</li> <li>Race conditions: Ensure proper sequencing of actions</li> <li>Browser state: Check if previous tests are affecting current test</li> </ul>"},{"location":"development/e2e-testing/#browser-not-found","title":"Browser Not Found","text":"<p>If you see \"Browser not found\" errors:</p> <pre><code># Rebuild the test image\ndocker compose -f docker-compose.dev.yml --profile test build test-e2e\n</code></pre>"},{"location":"development/e2e-testing/#service-not-ready","title":"Service Not Ready","text":"<p>If tests fail because the service isn't ready:</p> <ul> <li>Check service logs: <code>docker compose -f docker-compose.dev.yml logs trikusec</code></li> <li>Increase wait timeout in CI/CD workflow</li> <li>Check health endpoint: <code>curl http://localhost:8000/health/</code></li> </ul>"},{"location":"development/e2e-testing/#resources","title":"Resources","text":"<ul> <li>Playwright Documentation</li> <li>pytest-playwright Documentation</li> <li>Django Live Server Testing</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/lynis-license-format/","title":"Lynis license format","text":""},{"location":"development/lynis-license-format/#lynis-license-key-format-compliance","title":"Lynis License Key Format Compliance","text":""},{"location":"development/lynis-license-format/#overview","title":"Overview","text":"<p>Lynis clients filter license keys to only allow hexadecimal characters and hyphens using the filter <code>[a-f0-9-]</code>. This document confirms that TrikuSec's license key generation complies with this requirement.</p>"},{"location":"development/lynis-license-format/#lynis-license-key-validation","title":"Lynis License Key Validation","text":"<p>According to the Lynis code, license keys are validated using the following bash command:</p> <pre><code>echo \"${LICENSE_KEY}\" | ${TRBINARY} -cd '[a-f0-9-]'\n</code></pre> <p>This means Lynis only accepts license keys containing: - Lowercase hexadecimal characters: <code>a-f</code> - Digits: <code>0-9</code> - Hyphens: <code>-</code></p> <p>Any other characters (uppercase letters, special characters, etc.) will be stripped out.</p>"},{"location":"development/lynis-license-format/#trikusec-implementation","title":"TrikuSec Implementation","text":"<p>TrikuSec's license key generation is fully compliant with Lynis's format requirement.</p>"},{"location":"development/lynis-license-format/#implementation-details","title":"Implementation Details","text":"<p>Location: <code>src/api/utils/license_utils.py</code></p> <p>Function: <code>generate_license_key()</code></p> <pre><code>def generate_license_key():\n    \"\"\"\n    Generate a unique license key in format: xxxxxxxx-xxxxxxxx-xxxxxxxx\n    Uses lowercase hex characters (a-f0-9) to match existing format.\n\n    Returns:\n        str: A unique license key string\n    \"\"\"\n    characters = 'abcdef0123456789'\n\n    # Generate until we find a unique key\n    max_attempts = 100\n    for _ in range(max_attempts):\n        license_key = (\n            ''.join(random.choices(characters, k=8))\n            + '-'\n            + ''.join(random.choices(characters, k=8))\n            + '-'\n            + ''.join(random.choices(characters, k=8))\n        )\n\n        # Check if key already exists\n        if not LicenseKey.objects.filter(licensekey=license_key).exists():\n            return license_key\n\n    raise ValueError(\"Unable to generate unique license key after multiple attempts\")\n</code></pre>"},{"location":"development/lynis-license-format/#key-format","title":"Key Format","text":"<ul> <li>Characters: Only lowercase hexadecimal (<code>a-f</code>, <code>0-9</code>)</li> <li>Separators: Hyphens (<code>-</code>)</li> <li>Format: <code>xxxxxxxx-xxxxxxxx-xxxxxxxx</code> (3 segments of 8 hex characters)</li> <li>Total Length: 26 characters (24 hex + 2 hyphens)</li> </ul>"},{"location":"development/lynis-license-format/#example-keys","title":"Example Keys","text":"<pre><code>a1b2c3d4-e5f6a7b8-c9d0e1f2\n00112233-44556677-8899aabb\ndeadbeef-cafebabe-feedface\n</code></pre>"},{"location":"development/lynis-license-format/#test-coverage","title":"Test Coverage","text":"<p>The compliance is verified by automated tests in <code>src/api/tests.py</code>:</p>"},{"location":"development/lynis-license-format/#test-test_generate_license_key_format_lynis_compatible","title":"Test: <code>test_generate_license_key_format_lynis_compatible</code>","text":"<p>This test generates 10 license keys and verifies each one:</p> <ol> <li>\u2705 Has correct length (26 characters)</li> <li>\u2705 Has exactly 2 hyphens</li> <li>\u2705 Only contains hexadecimal characters <code>[a-f0-9]</code> and hyphens</li> <li>\u2705 Is lowercase (no uppercase letters)</li> <li>\u2705 Has 3 parts of 8 characters each</li> </ol> <p>Test command: <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test \\\n  pytest api/tests.py::TestLicenseValidation::test_generate_license_key_format_lynis_compatible -v\n</code></pre></p> <p>Result: \u2705 PASSED - All generated keys comply with Lynis format</p>"},{"location":"development/lynis-license-format/#compatibility-guarantee","title":"Compatibility Guarantee","text":"<p>TrikuSec guarantees that all generated license keys will:</p> <ol> <li>Work with Lynis clients without modification</li> <li>Pass Lynis's <code>tr -cd '[a-f0-9-]'</code> filter unchanged</li> <li>Contain only characters from the set <code>[a-f0-9-]</code></li> <li>Follow the format <code>xxxxxxxx-xxxxxxxx-xxxxxxxx</code></li> </ol>"},{"location":"development/lynis-license-format/#important-notes","title":"Important Notes","text":""},{"location":"development/lynis-license-format/#do-not-change-the-character-set","title":"Do NOT Change the Character Set","text":"<p>The character set in <code>generate_license_key()</code> must remain:</p> <pre><code>characters = 'abcdef0123456789'  # DO NOT CHANGE\n</code></pre> <p>Never add: - Uppercase letters (A-Z, G-Z) - Special characters (!, @, #, $, etc.) - Whitespace - Additional digits beyond 0-9 - Additional letters beyond a-f</p>"},{"location":"development/lynis-license-format/#why-lowercase-only","title":"Why Lowercase Only?","text":"<p>While uppercase hexadecimal characters (A-F) are technically valid hex, we use lowercase only for consistency and to avoid case-sensitivity issues in:</p> <ul> <li>Database queries</li> <li>User copy/paste operations</li> <li>Log file analysis</li> <li>URL parameters</li> </ul>"},{"location":"development/lynis-license-format/#verification","title":"Verification","text":"<p>If you modify the license key generation algorithm, always run the compliance test:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test \\\n  pytest api/tests.py::TestLicenseValidation -v\n</code></pre> <p>This ensures: - Keys are unique - Format is correct - Lynis compatibility is maintained - All license validation functions work correctly</p>"},{"location":"development/lynis-license-format/#references","title":"References","text":"<ul> <li>TrikuSec License Utils: <code>src/api/utils/license_utils.py</code></li> <li>TrikuSec Tests: <code>src/api/tests.py::TestLicenseValidation</code></li> <li>Lynis Documentation: https://cisofy.com/lynis/</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/setup/","title":"Setup","text":""},{"location":"development/setup/#development-setup","title":"Development Setup","text":"<p>Set up your development environment for TrikuSec.</p>"},{"location":"development/setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker and Docker Compose</li> <li>Git</li> <li>(Optional) A code editor</li> </ul> <p>No local Python installation required!</p>"},{"location":"development/setup/#setup-steps","title":"Setup Steps","text":""},{"location":"development/setup/#1-clone-repository","title":"1. Clone Repository","text":"<pre><code>git clone https://github.com/trikusec/trikusec.git\ncd trikusec\n</code></pre>"},{"location":"development/setup/#2-set-up-environment-variables","title":"2. Set Up Environment Variables","text":"<pre><code>cp .env.example .env\n</code></pre> <p>Generate a SECRET_KEY:</p> <pre><code>python3 -c \"import secrets; print(secrets.token_urlsafe(50))\"\n</code></pre> <p>Add to <code>.env</code>:</p> <pre><code>SECRET_KEY=your-generated-key\nDJANGO_DEBUG=True\n</code></pre>"},{"location":"development/setup/#3-start-development-services","title":"3. Start Development Services","text":"<pre><code>docker compose -f docker-compose.dev.yml up\n</code></pre> <p>This starts: - TrikuSec development server - Database - (Optional) Test services</p>"},{"location":"development/setup/#4-access-development-server","title":"4. Access Development Server","text":"<pre><code>http://localhost:3000\n</code></pre>"},{"location":"development/setup/#development-workflow","title":"Development Workflow","text":""},{"location":"development/setup/#running-tests","title":"Running Tests","text":"<p>All tests run in Docker:</p> <pre><code># Run all tests\ndocker compose -f docker-compose.dev.yml --profile test run --rm test\n\n# Run specific test file\ndocker compose -f docker-compose.dev.yml --profile test run --rm test pytest api/tests.py -v\n\n# Run with coverage\ndocker compose -f docker-compose.dev.yml --profile test run --rm test pytest --cov=api --cov-report=html\n</code></pre>"},{"location":"development/setup/#accessing-shell","title":"Accessing Shell","text":"<pre><code># Django shell\ndocker compose -f docker-compose.dev.yml exec trikusec python manage.py shell\n\n# Test container shell\ndocker compose -f docker-compose.dev.yml --profile test run --rm test /bin/bash\n</code></pre>"},{"location":"development/setup/#database-migrations","title":"Database Migrations","text":"<pre><code># Create migration\ndocker compose -f docker-compose.dev.yml exec trikusec python manage.py makemigrations\n\n# Apply migrations\ndocker compose -f docker-compose.dev.yml exec trikusec python manage.py migrate\n</code></pre>"},{"location":"development/setup/#code-organization","title":"Code Organization","text":""},{"location":"development/setup/#settings","title":"Settings","text":"<p>Settings are organized by environment:</p> <ul> <li><code>src/trikusec/settings/base.py</code> - Common settings</li> <li><code>src/trikusec/settings/development.py</code> - Development settings</li> <li><code>src/trikusec/settings/production.py</code> - Production settings</li> <li><code>src/trikusec/settings/testing.py</code> - Testing settings</li> </ul>"},{"location":"development/setup/#apps","title":"Apps","text":"<ul> <li><code>src/api/</code> - API application (models, views, forms, tests)</li> <li><code>src/frontend/</code> - Frontend application (views, templates, static files)</li> </ul>"},{"location":"development/setup/#utilities","title":"Utilities","text":"<ul> <li><code>src/api/utils/</code> - Utility modules (compliance, lynis_report, policy_query)</li> <li><code>src/conftest.py</code> - Pytest fixtures</li> </ul>"},{"location":"development/setup/#development-tips","title":"Development Tips","text":"<ul> <li>Hot Reload - Django development server auto-reloads on code changes</li> <li>Debug Mode - Enable <code>DJANGO_DEBUG=True</code> for detailed error pages</li> <li>Database - SQLite is used by default for development</li> <li>Logs - Check container logs: <code>docker compose logs trikusec</code></li> </ul>"},{"location":"development/setup/#next-steps","title":"Next Steps","text":"<ul> <li>Testing Guide - Learn about testing</li> <li>Contributing - Contribution guidelines</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/testing/","title":"Testing","text":""},{"location":"development/testing/#testing-guide","title":"Testing Guide","text":"<p>Complete guide to testing in TrikuSec.</p>"},{"location":"development/testing/#test-structure","title":"Test Structure","text":"<p>All tests use pytest (not Django's unittest):</p> <ul> <li><code>src/api/tests.py</code> - Unit tests for API endpoints</li> <li><code>src/api/tests_integration.py</code> - Integration tests</li> <li><code>src/api/tests_middleware.py</code> - Middleware tests</li> <li><code>src/api/tests_policy_security.py</code> - Policy security tests</li> <li><code>src/frontend/tests_e2e.py</code> - End-to-end tests (Playwright)</li> <li><code>src/conftest.py</code> - Shared pytest fixtures</li> <li><code>src/frontend/conftest.py</code> - E2E test fixtures</li> </ul>"},{"location":"development/testing/#running-tests","title":"Running Tests","text":""},{"location":"development/testing/#all-tests","title":"All Tests","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test\n</code></pre>"},{"location":"development/testing/#unit-tests-only","title":"Unit Tests Only","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test pytest -m \"not integration and not e2e\" -v\n</code></pre> <p>Note: E2E tests are automatically skipped if Playwright is not available. The <code>-m \"not e2e\"</code> marker explicitly excludes them for clarity.</p>"},{"location":"development/testing/#integration-tests-only","title":"Integration Tests Only","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test pytest -m integration -v\n</code></pre>"},{"location":"development/testing/#e2e-tests-only","title":"E2E Tests Only","text":"<p>E2E tests require Playwright and must be run in the <code>test-e2e</code> service:</p> <pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test-e2e pytest -m e2e -v\n</code></pre> <p>See E2E Testing Documentation for detailed information.</p>"},{"location":"development/testing/#specific-test-file","title":"Specific Test File","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test pytest api/tests.py -v\n</code></pre>"},{"location":"development/testing/#specific-test","title":"Specific Test","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test pytest api/tests.py::TestUploadReport::test_upload_report_valid_license_new_device -v\n</code></pre>"},{"location":"development/testing/#with-coverage","title":"With Coverage","text":"<pre><code>docker compose -f docker-compose.dev.yml --profile test run --rm test pytest --cov=api --cov=frontend --cov-report=html --cov-report=term-missing\n</code></pre>"},{"location":"development/testing/#test-types","title":"Test Types","text":""},{"location":"development/testing/#unit-tests","title":"Unit Tests","text":"<p>Test individual components in isolation:</p> <ul> <li>API endpoints</li> <li>Models</li> <li>Forms</li> <li>Utilities</li> </ul>"},{"location":"development/testing/#integration-tests","title":"Integration Tests","text":"<p>Test end-to-end workflows:</p> <ul> <li>Lynis report upload</li> <li>License validation</li> <li>Policy compliance</li> </ul>"},{"location":"development/testing/#middleware-tests","title":"Middleware Tests","text":"<p>Test custom middleware:</p> <ul> <li>Rate limiting</li> <li>Security headers</li> <li>Error handling</li> </ul>"},{"location":"development/testing/#e2e-tests","title":"E2E Tests","text":"<p>Test complete user workflows in a real browser:</p> <ul> <li>Frontend interactions</li> <li>Form submissions</li> <li>Sidebar state management</li> <li>User flows</li> </ul> <p>See E2E Testing Documentation for details.</p>"},{"location":"development/testing/#test-fixtures","title":"Test Fixtures","text":"<p>Fixtures are defined in <code>src/conftest.py</code>:</p> <ul> <li><code>license_key</code> - Sample license key</li> <li><code>device</code> - Sample device</li> <li><code>lynis_report</code> - Mock Lynis report data</li> </ul>"},{"location":"development/testing/#writing-tests","title":"Writing Tests","text":""},{"location":"development/testing/#example-unit-test","title":"Example Unit Test","text":"<pre><code>import pytest\nfrom api.views import upload_report\n\ndef test_upload_report_valid_license(client, license_key):\n    response = client.post('/api/lynis/upload/', {\n        'licensekey': license_key.licensekey,\n        'hostid': 'test-host',\n        'data': 'base64-encoded-data'\n    })\n    assert response.status_code == 200\n</code></pre>"},{"location":"development/testing/#example-integration-test","title":"Example Integration Test","text":"<pre><code>@pytest.mark.integration\ndef test_lynis_workflow(client, license_key):\n    # Upload report\n    response = client.post('/api/lynis/upload/', {...})\n    assert response.status_code == 200\n\n    # Check device created\n    device = Device.objects.get(hostid='test-host')\n    assert device is not None\n</code></pre>"},{"location":"development/testing/#test-database","title":"Test Database","text":"<p>The test container automatically: - Runs migrations before tests - Uses a separate test database - Cleans up after tests</p>"},{"location":"development/testing/#continuous-integration","title":"Continuous Integration","text":"<p>Tests run automatically on: - Push to <code>main</code> or <code>develop</code> branches - Pull requests</p> <p>CI runs three separate test jobs: 1. Unit Tests - Fast unit tests (excludes integration and E2E tests) 2. Integration Tests - End-to-end API workflows with Lynis client 3. E2E Tests - Browser-based frontend tests with Playwright</p> <p>See <code>.github/workflows/test.yml</code> for CI configuration.</p>"},{"location":"development/testing/#best-practices","title":"Best Practices","text":"<ul> <li>Isolation - Each test should be independent</li> <li>Fixtures - Use fixtures for common test data</li> <li>Naming - Use descriptive test names</li> <li>Coverage - Aim for high test coverage</li> <li>Speed - Keep tests fast</li> </ul>"},{"location":"development/testing/#next-steps","title":"Next Steps","text":"<ul> <li>Development Setup - Development environment</li> <li>Contributing - Contribution guidelines</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"development/ui-ux-architecture/","title":"Ui ux architecture","text":""},{"location":"development/ui-ux-architecture/#uiux-architecture","title":"UI/UX Architecture","text":"<p>TrikuSec follows a consistent UI/UX pattern for CRUD operations to provide a modern, efficient user experience.</p>"},{"location":"development/ui-ux-architecture/#overview","title":"Overview","text":""},{"location":"development/ui-ux-architecture/#the-three-layer-pattern","title":"The Three-Layer Pattern","text":"<p>TrikuSec uses a consistent three-layer approach for data management:</p> <ol> <li>List Views: Full-window display showing all items</li> <li>Detail Views: Full-window view with related data and relationships</li> <li>Create/Edit Operations: Collapsible right-side panel (sidebar)</li> </ol> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 List View (Full Window)                \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 Item 1                         Edit \u2502 \u2502\n\u2502 \u2502 Item 2                         Edit \u2502 \u2502\n\u2502 \u2502 Item 3                         Edit \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Detail View (Full Window)               \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502 \u2502 Item Details                        \u2502 \u2502\n\u2502 \u2502 \u2022 Related Data                      \u2502 \u2502\n\u2502 \u2502 \u2022 Relationships                     \u2502 \u2502\n\u2502 \u2502 \u2022 History                           \u2502 \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 List/Detail View       \u2502 Edit Sidebar   \u2502\n\u2502                        \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502                        \u2502 \u2502 Form       \u2502 \u2502\n\u2502                        \u2502 \u2502 Fields     \u2502 \u2502\n\u2502                        \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"development/ui-ux-architecture/#rationale","title":"Rationale","text":"<p>This pattern provides several key benefits:</p>"},{"location":"development/ui-ux-architecture/#1-context-preservation","title":"1. Context Preservation","text":"<p>Users can see the list or related data while editing, maintaining context and reducing cognitive load.</p>"},{"location":"development/ui-ux-architecture/#2-reduced-navigation","title":"2. Reduced Navigation","text":"<p>No page reloads or navigation interruptions. Users stay focused on their task.</p>"},{"location":"development/ui-ux-architecture/#3-quick-operations","title":"3. Quick Operations","text":"<p>Fast edits without losing place. Ideal for frequent, repetitive operations.</p>"},{"location":"development/ui-ux-architecture/#4-modern-ux","title":"4. Modern UX","text":"<p>Follows patterns from popular applications like: - Gmail (compose/reply sidebar) - Slack (thread/message sidebar) - Linear (issue detail sidebar) - Notion (page editing)</p>"},{"location":"development/ui-ux-architecture/#decision-guidelines","title":"Decision Guidelines","text":""},{"location":"development/ui-ux-architecture/#use-collapsible-sidebar-for","title":"\u2705 Use Collapsible Sidebar For:","text":"<ul> <li>Simple forms (3-6 fields)</li> <li>Example: License keys (name, max devices, expiration, active status)</li> <li>Frequent edit operations</li> <li>Example: Updating rule names, toggling rule status</li> <li>Quick create/update workflows</li> <li>Example: Creating multiple licenses in succession</li> <li>Forms where context matters</li> <li>Example: Editing while viewing related devices</li> </ul>"},{"location":"development/ui-ux-architecture/#use-full-page-forms-for","title":"\u274c Use Full-Page Forms For:","text":"<ul> <li>Complex forms (10+ fields)</li> <li>Example: Multi-section configuration pages</li> <li>Multi-step wizards</li> <li>Example: Guided setup processes</li> <li>Critical operations</li> <li>Example: Payment forms, destructive actions</li> <li>Rich content editing</li> <li>Example: Markdown editors, WYSIWYG content</li> <li>Heavy media uploads</li> <li>Example: Bulk file uploads with previews</li> <li>Mobile-first features</li> <li>Sidebars don't work well on small screens</li> </ul>"},{"location":"development/ui-ux-architecture/#current-implementations","title":"Current Implementations","text":""},{"location":"development/ui-ux-architecture/#1-rules-srcfrontendtemplatespolicyrule_edit_sidebarhtml","title":"1. Rules (<code>src/frontend/templates/policy/rule_edit_sidebar.html</code>)","text":"<ul> <li>Form fields: Name, description, query, enabled status</li> <li>Context: See rule list while editing</li> <li>JavaScript: <code>src/frontend/static/js/rules.js</code></li> </ul>"},{"location":"development/ui-ux-architecture/#2-rulesets-srcfrontendtemplatespolicyruleset_selection_sidebarhtml","title":"2. Rulesets (<code>src/frontend/templates/policy/ruleset_selection_sidebar.html</code>)","text":"<ul> <li>Form fields: Ruleset selection checkboxes</li> <li>Context: See device details while assigning rulesets</li> <li>JavaScript: <code>src/frontend/static/js/rulesets.js</code></li> </ul>"},{"location":"development/ui-ux-architecture/#3-licenses-srcfrontendtemplateslicenselicense_edit_sidebarhtml","title":"3. Licenses (<code>src/frontend/templates/license/license_edit_sidebar.html</code>)","text":"<ul> <li>Form fields: Name, max devices, expiration, active status</li> <li>Context: See license list or device list while editing</li> <li>JavaScript: <code>src/frontend/static/js/licenses.js</code></li> </ul>"},{"location":"development/ui-ux-architecture/#implementation-pattern","title":"Implementation Pattern","text":""},{"location":"development/ui-ux-architecture/#template-structure","title":"Template Structure","text":"<pre><code>&lt;!-- Include in both list and detail pages --&gt;\n&lt;div id=\"item-edit-panel\" class=\"hidden fixed right-0 top-0 h-full w-1/4 bg-white shadow-md z-50\"&gt;\n    &lt;!-- Header --&gt;\n    &lt;div class=\"flex justify-between items-center p-4 border-b bg-gray-200\"&gt;\n        &lt;h2 class=\"text-xl font-bold\" id=\"item-edit-title\"&gt;Edit Item&lt;/h2&gt;\n        &lt;button class=\"item-edit-panel-button text-gray-600\"&gt;\n            &lt;!-- Close icon (X) --&gt;\n            &lt;svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"size-6\"&gt;\n                &lt;path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" /&gt;\n            &lt;/svg&gt;\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Form --&gt;\n    &lt;form id=\"item-edit-form\" method=\"POST\"&gt;\n        {% csrf_token %}\n        &lt;input type=\"hidden\" name=\"item_id\" id=\"item_id\" value=\"\"&gt;\n\n        &lt;!-- Form fields here --&gt;\n        &lt;div class=\"p-4 mb-4\"&gt;\n            &lt;label for=\"item_name\" class=\"block text-sm font-medium text-gray-700\"&gt;\n                Name &lt;span class=\"text-red-500\"&gt;*&lt;/span&gt;\n            &lt;/label&gt;\n            &lt;input type=\"text\" id=\"item_name\" name=\"name\" \n                   class=\"mt-1 p-2 block w-full border border-gray-300 rounded-md\" \n                   required /&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Error messages container --&gt;\n        &lt;div id=\"item-form-errors\" class=\"hidden p-4 mb-4 mx-4 bg-red-100 border border-red-400 text-red-700 rounded\"&gt;\n            &lt;ul id=\"item-error-list\"&gt;&lt;/ul&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Action buttons (fixed at bottom) --&gt;\n        &lt;div class=\"absolute flex space-x-2 w-full bottom-0 p-4 bg-gray-200\"&gt;\n            &lt;button type=\"submit\" class=\"w-1/2 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\"&gt;\n                Save\n            &lt;/button&gt;\n            &lt;button type=\"button\" class=\"item-edit-panel-button w-1/2 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600\"&gt;\n                Cancel\n            &lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"development/ui-ux-architecture/#javascript-structure","title":"JavaScript Structure","text":"<p>Important: Firefox Compatibility</p> <p>When implementing event listeners for buttons in sidebars (especially those initially hidden), use event delegation instead of direct event listeners. Firefox has issues with attaching listeners to hidden elements or elements that become visible dynamically.</p> <pre><code>// \u2705 GOOD: Event delegation (works in all browsers including Firefox)\nconst panel = document.getElementById('rule-selection-panel');\nif (panel) {\n    panel.addEventListener('click', function(e) {\n        const button = e.target.closest('.rule-edit-panel-button');\n        if (button) {\n            e.preventDefault();\n            e.stopPropagation();\n            const ruleId = button.hasAttribute('data-rule-id') ? button.dataset.ruleId : null;\n            openRuleEditFromSelection(ruleId);\n        }\n    });\n}\n\n// \u274c BAD: Direct event listener (may fail in Firefox for hidden elements)\nconst button = document.querySelector('.rule-edit-panel-button');\nbutton.addEventListener('click', function() { ... }); // May not work in Firefox\n</code></pre> <pre><code>// Toggle sidebar visibility\nfunction toggleItemEditPanel(itemId) {\n    const panel = document.getElementById('item-edit-panel');\n    panel.classList.toggle('hidden');\n\n    // Don't load data if closing\n    if (panel.classList.contains('hidden')) {\n        return;\n    }\n\n    // Update form action and title\n    const form = document.getElementById('item-edit-form');\n    const title = document.getElementById('item-edit-title');\n\n    if (itemId) {\n        // Edit mode\n        form.action = `/item/${itemId}/edit/`;\n        title.textContent = 'Edit Item';\n        loadItemDetails(itemId);\n    } else {\n        // Create mode\n        form.action = '/item/create/';\n        title.textContent = 'Create New Item';\n        loadItemDetails(); // Empty form\n    }\n}\n\n// Load item data into form\nfunction loadItemDetails(itemId) {\n    if (!itemId) {\n        // Clear form for new item\n        document.getElementById('item_name').value = '';\n        document.getElementById('item_id').value = '';\n        hideFormErrors();\n        return;\n    }\n\n    // Find item in data (passed from Django)\n    const item = items.find(i =&gt; i.id === Number(itemId));\n    if (!item) {\n        console.error('Item not found:', itemId);\n        return;\n    }\n\n    // Populate form fields\n    document.getElementById('item_name').value = item.name;\n    document.getElementById('item_id').value = item.id;\n    hideFormErrors();\n}\n\n// Submit form via AJAX\nfunction submitItemForm() {\n    const form = document.getElementById('item-edit-form');\n    const formData = new FormData(form);\n    const submitButton = form.querySelector('button[type=\"submit\"]');\n\n    // Show loading state\n    const originalText = submitButton.textContent;\n    submitButton.textContent = 'Saving...';\n    submitButton.disabled = true;\n\n    fetch(form.action, {\n        method: 'POST',\n        body: formData,\n        headers: {\n            'X-Requested-With': 'XMLHttpRequest',\n        },\n    })\n    .then(response =&gt; response.json())\n    .then(data =&gt; {\n        if (data.success) {\n            // Close panel and reload page\n            toggleItemEditPanel();\n            location.reload();\n        } else {\n            // Show errors\n            showFormErrors(data.errors);\n            submitButton.textContent = originalText;\n            submitButton.disabled = false;\n        }\n    })\n    .catch(error =&gt; {\n        console.error('Error:', error);\n        showFormErrors(['An error occurred while saving.']);\n        submitButton.textContent = originalText;\n        submitButton.disabled = false;\n    });\n}\n\n// Error handling\nfunction showFormErrors(errors) {\n    const errorContainer = document.getElementById('item-form-errors');\n    const errorList = document.getElementById('item-error-list');\n\n    errorList.innerHTML = '';\n\n    if (typeof errors === 'object' &amp;&amp; !Array.isArray(errors)) {\n        // Django form errors: {field: [errors]}\n        for (const [field, messages] of Object.entries(errors)) {\n            messages.forEach(message =&gt; {\n                const li = document.createElement('li');\n                li.textContent = `${field}: ${message}`;\n                errorList.appendChild(li);\n            });\n        }\n    } else if (Array.isArray(errors)) {\n        // Simple error messages\n        errors.forEach(message =&gt; {\n            const li = document.createElement('li');\n            li.textContent = message;\n            errorList.appendChild(li);\n        });\n    }\n\n    errorContainer.classList.remove('hidden');\n}\n\nfunction hideFormErrors() {\n    document.getElementById('item-form-errors').classList.add('hidden');\n}\n\n// Event listeners\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Close/cancel buttons\n    document.querySelectorAll('.item-edit-panel-button').forEach(button =&gt; {\n        button.addEventListener('click', function(e) {\n            e.preventDefault();\n            toggleItemEditPanel();\n        });\n    });\n\n    // Form submission\n    const form = document.getElementById('item-edit-form');\n    if (form) {\n        form.addEventListener('submit', function(e) {\n            e.preventDefault();\n            submitItemForm();\n        });\n    }\n});\n</code></pre>"},{"location":"development/ui-ux-architecture/#django-view-structure","title":"Django View Structure","text":"<pre><code>from django.http import JsonResponse\nfrom django.shortcuts import redirect, render, get_object_or_404\nfrom django.contrib.auth.decorators import login_required\nfrom django.views.decorators.csrf import csrf_protect\nimport json\n\n@login_required\ndef item_list(request):\n    \"\"\"List view with sidebar support\"\"\"\n    items = Item.objects.all().order_by('-created_at')\n\n    # Serialize for JavaScript\n    items_data = [\n        {\n            'id': item.id,\n            'name': item.name,\n            # ... other fields\n        }\n        for item in items\n    ]\n\n    return render(request, 'item/item_list.html', {\n        'items': items,\n        'items_json': json.dumps(items_data),\n    })\n\n@login_required\ndef item_detail(request, item_id):\n    \"\"\"Detail view with sidebar support\"\"\"\n    item = get_object_or_404(Item, id=item_id)\n\n    # Serialize for JavaScript\n    item_data = {\n        'id': item.id,\n        'name': item.name,\n        # ... other fields\n    }\n\n    return render(request, 'item/item_detail.html', {\n        'item': item,\n        'item_json': json.dumps(item_data),\n    })\n\n@login_required\n@csrf_protect\ndef item_create(request):\n    \"\"\"Create item (AJAX + fallback)\"\"\"\n    if request.method == 'POST':\n        form = ItemForm(request.POST)\n        if form.is_valid():\n            item = form.save()\n\n            # AJAX request: return JSON\n            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':\n                return JsonResponse({\n                    'success': True,\n                    'item_id': item.id,\n                    'message': 'Item created successfully'\n                })\n\n            # Traditional request: redirect\n            return redirect('item_detail', item_id=item.id)\n        else:\n            # AJAX request: return errors\n            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':\n                return JsonResponse({\n                    'success': False,\n                    'errors': form.errors\n                }, status=400)\n\n    # Fallback for GET or non-AJAX POST\n    return redirect('item_list')\n\n@login_required\n@csrf_protect\ndef item_edit(request, item_id):\n    \"\"\"Edit item (AJAX + fallback)\"\"\"\n    item = get_object_or_404(Item, id=item_id)\n\n    if request.method == 'POST':\n        form = ItemForm(request.POST, instance=item)\n        if form.is_valid():\n            form.save()\n\n            # AJAX request: return JSON\n            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':\n                return JsonResponse({\n                    'success': True,\n                    'item_id': item.id,\n                    'message': 'Item updated successfully'\n                })\n\n            # Traditional request: redirect\n            return redirect('item_detail', item_id=item.id)\n        else:\n            # AJAX request: return errors\n            if request.headers.get('X-Requested-With') == 'XMLHttpRequest':\n                return JsonResponse({\n                    'success': False,\n                    'errors': form.errors\n                }, status=400)\n\n    # Fallback for GET or non-AJAX POST\n    return redirect('item_detail', item_id=item.id)\n</code></pre>"},{"location":"development/ui-ux-architecture/#template-integration","title":"Template Integration","text":"<p>In list and detail templates:</p> <pre><code>{% extends 'base.html' %}\n{% load static %}\n\n{% block content %}\n    &lt;!-- Your list/detail content here --&gt;\n\n    &lt;!-- Include the sidebar --&gt;\n    {% include 'item/item_edit_sidebar.html' %}\n\n    &lt;script&gt;\n        // Pass data to JavaScript\n        const items = {{ items_json|safe }};\n    &lt;/script&gt;\n    &lt;script src=\"{% static 'js/items.js' %}\"&gt;&lt;/script&gt;\n{% endblock %}\n</code></pre>"},{"location":"development/ui-ux-architecture/#best-practices","title":"Best Practices","text":""},{"location":"development/ui-ux-architecture/#1-error-handling","title":"1. Error Handling","text":"<ul> <li>Show validation errors inline without closing the sidebar</li> <li>Display field-specific errors next to the relevant field</li> <li>Provide clear, actionable error messages</li> </ul>"},{"location":"development/ui-ux-architecture/#2-loading-states","title":"2. Loading States","text":"<ul> <li>Disable submit button while saving</li> <li>Show \"Saving...\" text or spinner</li> <li>Prevent double submissions</li> </ul>"},{"location":"development/ui-ux-architecture/#3-success-feedback","title":"3. Success Feedback","text":"<ul> <li>Currently: Page reload (simple, reliable)</li> <li>Future: Toast notifications (better UX, no reload)</li> </ul>"},{"location":"development/ui-ux-architecture/#4-keyboard-support","title":"4. Keyboard Support","text":"<ul> <li>Planned: <code>Esc</code> key to close sidebar</li> <li>Planned: <code>Cmd/Ctrl + Enter</code> to save</li> <li>Tab navigation should work naturally</li> </ul>"},{"location":"development/ui-ux-architecture/#5-mobile-responsiveness","title":"5. Mobile Responsiveness","text":"<ul> <li>Consider full-screen modal on mobile</li> <li>Test sidebar behavior on tablets</li> <li>Ensure touch targets are large enough</li> </ul>"},{"location":"development/ui-ux-architecture/#6-data-synchronization","title":"6. Data Synchronization","text":"<ul> <li>Serialize data from Django to JavaScript using <code>json.dumps()</code></li> <li>Keep data serialization in the view layer</li> <li>Handle timezone conversions properly (use <code>.isoformat()</code>)</li> </ul>"},{"location":"development/ui-ux-architecture/#7-consistency","title":"7. Consistency","text":"<ul> <li>Use the same class names (<code>.item-edit-panel-button</code>)</li> <li>Follow the same HTML structure</li> <li>Use consistent error handling patterns</li> </ul>"},{"location":"development/ui-ux-architecture/#8-firefox-compatibility","title":"8. Firefox Compatibility","text":"<ul> <li>Always use event delegation for buttons in sidebars, especially when panels are initially hidden</li> <li>Direct event listeners may fail in Firefox when attached to hidden elements</li> <li>Event delegation (<code>addEventListener</code> on parent, use <code>closest()</code> to find target) works reliably across all browsers</li> <li>See JavaScript Structure section above for example implementation</li> </ul>"},{"location":"development/ui-ux-architecture/#testing-checklist","title":"Testing Checklist","text":"<p>When implementing a new sidebar:</p> <ul> <li> Create mode works (empty form)</li> <li> Edit mode works (pre-populated form)</li> <li> Save button submits via AJAX</li> <li> Cancel button closes sidebar</li> <li> Close button (X) closes sidebar</li> <li> Validation errors display inline</li> <li> Success closes sidebar and updates view</li> <li> Works from list page</li> <li> Works from detail page</li> <li> Form data serializes correctly</li> <li> Backend handles AJAX and fallback</li> <li> No console errors</li> <li> Loading state shows during save</li> <li> Double-submit is prevented</li> </ul>"},{"location":"development/ui-ux-architecture/#migration-guide","title":"Migration Guide","text":""},{"location":"development/ui-ux-architecture/#converting-full-page-form-to-sidebar","title":"Converting Full-Page Form to Sidebar","text":"<ol> <li>Create sidebar template (e.g., <code>item_edit_sidebar.html</code>)</li> <li>Copy form fields from existing template</li> <li>Wrap in sidebar structure</li> <li> <p>Add error container</p> </li> <li> <p>Create JavaScript file (e.g., <code>items.js</code>)</p> </li> <li>Implement toggle function</li> <li>Implement load function</li> <li>Implement submit function</li> <li> <p>Add event listeners</p> </li> <li> <p>Update views</p> </li> <li>Add JSON serialization</li> <li>Add AJAX response handling</li> <li> <p>Keep traditional fallback</p> </li> <li> <p>Update list/detail templates</p> </li> <li>Include sidebar template</li> <li>Load JavaScript file</li> <li>Pass data to JavaScript</li> <li> <p>Convert links to buttons with <code>onclick</code></p> </li> <li> <p>Delete old form template</p> </li> <li> <p>Only after testing everything works</p> </li> <li> <p>Test thoroughly</p> </li> <li>All items from testing checklist</li> <li>Both list and detail pages</li> <li>Create and edit modes</li> </ol>"},{"location":"development/ui-ux-architecture/#future-enhancements","title":"Future Enhancements","text":""},{"location":"development/ui-ux-architecture/#planned-improvements","title":"Planned Improvements","text":"<ol> <li>Toast Notifications</li> <li>Replace page reload with toast feedback</li> <li> <p>Show success/error messages elegantly</p> </li> <li> <p>Keyboard Shortcuts</p> </li> <li><code>Esc</code> to close sidebar</li> <li><code>Cmd/Ctrl + Enter</code> to save</li> <li> <p>Arrow keys for navigation</p> </li> <li> <p>Animation</p> </li> <li>Smooth slide-in/out transitions</li> <li>Loading spinners</li> <li> <p>Success animations</p> </li> <li> <p>Mobile Optimization</p> </li> <li>Full-screen modal on small screens</li> <li>Better touch interactions</li> <li> <p>Swipe to close</p> </li> <li> <p>Auto-save</p> </li> <li>Save draft changes automatically</li> <li>Restore unsaved changes on reopen</li> </ol>"},{"location":"development/ui-ux-architecture/#references","title":"References","text":"<ul> <li>AGENTS.md - Detailed implementation guidelines</li> <li>Existing implementations: Rules, Rulesets, Licenses</li> <li>Django JsonResponse: Django documentation</li> <li>Fetch API: MDN documentation</li> </ul> <p>Questions or suggestions? Open an issue or submit a pull request!</p> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"installation/","title":"Index","text":""},{"location":"installation/#installation","title":"Installation","text":"<p>This section covers installing and setting up TrikuSec.</p>"},{"location":"installation/#overview","title":"Overview","text":"<p>TrikuSec consists of two main components:</p> <ol> <li>TrikuSec Server - The central server that receives and manages audit reports</li> <li>Lynis Client - The auditing tool installed on each server you want to monitor</li> </ol> <p>Security-First Design</p> <p>TrikuSec uses a read-only architecture - it only receives data from your servers and never pushes changes or executes commands. The only requirement on monitored servers is Lynis, a well-established open-source tool available in standard Linux repositories.</p>"},{"location":"installation/#installation-options","title":"Installation Options","text":"<ul> <li>Docker Installation - Recommended for most users (quick setup)</li> <li>PostgreSQL Setup - Database configuration for production</li> <li>Client Setup - Configuring Lynis clients to send reports</li> <li>Backup &amp; Recovery - Backup strategies and recovery procedures</li> </ul>"},{"location":"installation/#prerequisites","title":"Prerequisites","text":"<p>Before installing TrikuSec, ensure you have:</p> <ul> <li>Docker and Docker Compose installed</li> <li>A secure <code>SECRET_KEY</code> generated for Django</li> <li>(Optional) PostgreSQL for production deployments</li> </ul>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<p>After installation, proceed to:</p> <ul> <li>Configuration - Configure environment variables and security settings</li> <li>Getting Started - Learn how to use TrikuSec</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"installation/backup-recovery/","title":"Backup recovery","text":""},{"location":"installation/backup-recovery/#backup-recovery","title":"Backup &amp; Recovery","text":"<p>This guide covers backup and recovery strategies for TrikuSec deployments using both SQLite and PostgreSQL databases.</p>"},{"location":"installation/backup-recovery/#overview","title":"Overview","text":"<p>Regular backups are essential for protecting your audit data and ensuring business continuity. This guide provides:</p> <ul> <li>Manual backup procedures for SQLite and PostgreSQL</li> <li>Recovery procedures for both database types</li> </ul>"},{"location":"installation/backup-recovery/#sqlite-backup-developmentsmall-deployments","title":"SQLite Backup (Development/Small Deployments)","text":"<p>SQLite is the default database for TrikuSec and is suitable for small deployments or development environments.</p>"},{"location":"installation/backup-recovery/#manual-backup","title":"Manual Backup","text":""},{"location":"installation/backup-recovery/#create-backup-directory","title":"Create Backup Directory","text":"<pre><code>mkdir -p backups\n</code></pre>"},{"location":"installation/backup-recovery/#backup-database-while-application-is-running","title":"Backup Database (While Application is Running)","text":"<p>SQLite's <code>.backup</code> command creates a consistent backup even while the application is running:</p> <pre><code># Backup database (while application is running)\ndocker compose exec trikusec sqlite3 /app/trikusec.sqlite3 \".backup '/app/backups/trikusec-backup-$(date +%Y%m%d-%H%M%S).sqlite3'\"\n\n# Copy backup to host\ndocker compose cp trikusec:/app/backups/. ./backups/\n</code></pre>"},{"location":"installation/backup-recovery/#verify-backup","title":"Verify Backup","text":"<pre><code># Check backup file exists and has reasonable size\nls -lh backups/trikusec-backup-*.sqlite3\n</code></pre>"},{"location":"installation/backup-recovery/#restore-from-sqlite-backup","title":"Restore from SQLite Backup","text":""},{"location":"installation/backup-recovery/#stop-application","title":"Stop Application","text":"<pre><code>docker compose down\n</code></pre>"},{"location":"installation/backup-recovery/#copy-backup-file","title":"Copy Backup File","text":"<pre><code># Copy backup file to source directory\ncp backups/trikusec-backup-20241113-020000.sqlite3 src/trikusec.sqlite3\n</code></pre>"},{"location":"installation/backup-recovery/#start-application","title":"Start Application","text":"<pre><code>docker compose up -d\n</code></pre>"},{"location":"installation/backup-recovery/#verify-restoration","title":"Verify Restoration","text":"<pre><code># Check application is running\ndocker compose ps\n\n# Verify data in admin interface\n# Navigate to http://localhost:8000/admin/\n</code></pre>"},{"location":"installation/backup-recovery/#postgresql-backup-production","title":"PostgreSQL Backup (Production)","text":"<p>PostgreSQL is recommended for production deployments due to better performance and concurrency handling.</p>"},{"location":"installation/backup-recovery/#manual-backup_1","title":"Manual Backup","text":""},{"location":"installation/backup-recovery/#backup-database","title":"Backup Database","text":"<pre><code># Backup database using pg_dump\ndocker compose exec postgres pg_dump -U trikusec_user -d trikusec &gt; backup-$(date +%Y%m%d-%H%M%S).sql\n\n# Or backup directly from host (if PostgreSQL is accessible)\npg_dump -h localhost -U trikusec_user -d trikusec &gt; backup-$(date +%Y%m%d-%H%M%S).sql\n</code></pre>"},{"location":"installation/backup-recovery/#backup-with-compression","title":"Backup with Compression","text":"<p>For large databases, use compression to reduce backup size:</p> <pre><code>docker compose exec postgres pg_dump -U trikusec_user -d trikusec | gzip &gt; backup-$(date +%Y%m%d-%H%M%S).sql.gz\n</code></pre>"},{"location":"installation/backup-recovery/#backup-only-schema","title":"Backup Only Schema","text":"<p>To backup only the database structure (without data):</p> <pre><code>docker compose exec postgres pg_dump -U trikusec_user -d trikusec --schema-only &gt; schema-backup-$(date +%Y%m%d-%H%M%S).sql\n</code></pre>"},{"location":"installation/backup-recovery/#backup-only-data","title":"Backup Only Data","text":"<p>To backup only the data (without schema):</p> <pre><code>docker compose exec postgres pg_dump -U trikusec_user -d trikusec --data-only &gt; data-backup-$(date +%Y%m%d-%H%M%S).sql\n</code></pre>"},{"location":"installation/backup-recovery/#restore-from-postgresql-backup","title":"Restore from PostgreSQL Backup","text":""},{"location":"installation/backup-recovery/#stop-application_1","title":"Stop Application","text":"<pre><code>docker compose down\n</code></pre>"},{"location":"installation/backup-recovery/#connect-to-database-container","title":"Connect to Database Container","text":"<pre><code>docker compose exec postgres psql -U trikusec_user\n</code></pre>"},{"location":"installation/backup-recovery/#drop-and-recreate-database","title":"Drop and Recreate Database","text":"<pre><code>-- Drop existing database\nDROP DATABASE trikusec;\n\n-- Create new database\nCREATE DATABASE trikusec;\n\n-- Exit psql\n\\q\n</code></pre>"},{"location":"installation/backup-recovery/#restore-from-backup","title":"Restore from Backup","text":"<pre><code># Restore from uncompressed backup\ndocker compose exec -T postgres psql -U trikusec_user trikusec &lt; backup-20241113-020000.sql\n\n# Restore from compressed backup\ngunzip &lt; backup-20241113-020000.sql.gz | docker compose exec -T postgres psql -U trikusec_user trikusec\n</code></pre>"},{"location":"installation/backup-recovery/#start-application_1","title":"Start Application","text":"<pre><code>docker compose up -d\n</code></pre>"},{"location":"installation/backup-recovery/#verify-restoration_1","title":"Verify Restoration","text":"<pre><code># Check application is running\ndocker compose ps\n\n# Verify data in admin interface\n# Navigate to http://localhost:8000/admin/\n</code></pre>"},{"location":"installation/backup-recovery/#backup-best-practices","title":"Backup Best Practices","text":""},{"location":"installation/backup-recovery/#frequency","title":"Frequency","text":"<ul> <li>Development: Weekly backups or before major changes</li> <li>Production: Daily backups at minimum</li> <li>High-traffic production: Multiple backups per day</li> </ul>"},{"location":"installation/backup-recovery/#retention","title":"Retention","text":"<ul> <li>Development: 7-14 days</li> <li>Production: 30-90 days</li> <li>Compliance requirements: Follow your organization's data retention policies</li> </ul>"},{"location":"installation/backup-recovery/#storage","title":"Storage","text":"<ul> <li>Store backups in a separate location from the production database</li> <li>Use off-site storage for critical production backups</li> <li>Encrypt backups containing sensitive data</li> <li>Test restore procedures regularly</li> </ul>"},{"location":"installation/backup-recovery/#verification","title":"Verification","text":"<ul> <li>Regularly verify backup file integrity</li> <li>Test restore procedures in a non-production environment</li> <li>Document your backup and recovery procedures</li> <li>Keep backup logs for audit purposes</li> </ul>"},{"location":"installation/backup-recovery/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/backup-recovery/#sqlite-backup-issues","title":"SQLite Backup Issues","text":"<p>Problem: Permission denied when creating backup</p> <pre><code># Solution: Ensure backup directory exists in container\ndocker compose exec trikusec mkdir -p /app/backups\n</code></pre> <p>Problem: Backup file is empty or corrupted</p> <pre><code># Solution: Verify database file exists and is accessible\ndocker compose exec trikusec ls -lh /app/trikusec.sqlite3\n</code></pre>"},{"location":"installation/backup-recovery/#postgresql-backup-issues","title":"PostgreSQL Backup Issues","text":"<p>Problem: Authentication failed</p> <pre><code># Solution: Verify database credentials\ndocker compose exec postgres psql -U trikusec_user -d trikusec -c \"SELECT 1;\"\n</code></pre> <p>Problem: Backup file is too large</p> <pre><code># Solution: Use compression\ndocker compose exec postgres pg_dump -U trikusec_user -d trikusec | gzip &gt; backup.sql.gz\n</code></pre>"},{"location":"installation/backup-recovery/#related-documentation","title":"Related Documentation","text":"<ul> <li>Docker Installation - Setting up TrikuSec with Docker</li> <li>PostgreSQL Setup - Configuring PostgreSQL for production</li> <li>Configuration - Environment variables and settings</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"installation/client-setup/","title":"Client setup","text":""},{"location":"installation/client-setup/#client-setup","title":"Client Setup","text":"<p>This guide explains how to configure Lynis clients to send audit reports to your TrikuSec server.</p> <p>Security Note</p> <p>TrikuSec uses a read-only model - it only receives audit data from your servers. The only requirement is Lynis, a well-established open-source tool that can be installed via standard package managers. No proprietary agents or additional services are required.</p>"},{"location":"installation/client-setup/#prerequisites","title":"Prerequisites","text":"<ul> <li>A running TrikuSec server</li> <li>A license key (generated by the server)</li> <li>Lynis installed on the client server (available in standard Linux repositories)</li> </ul>"},{"location":"installation/client-setup/#installation-steps","title":"Installation Steps","text":""},{"location":"installation/client-setup/#1-install-lynis","title":"1. Install Lynis","text":"<p>On Debian/Ubuntu:</p> <pre><code>sudo apt install lynis\n</code></pre> <p>On other distributions, use your package manager or install from source.</p>"},{"location":"installation/client-setup/#2-generate-license-key","title":"2. Generate License Key","text":"<p>First, you need to obtain a license key from your TrikuSec server. This can be done through:</p> <ul> <li>The web interface (after logging in)</li> <li>The admin API endpoint</li> <li>The management command</li> </ul>"},{"location":"installation/client-setup/#3-create-custom-profile","title":"3. Create Custom Profile","text":"<p>Create a custom Lynis profile at <code>/etc/lynis/custom.prf</code>:</p> <pre><code># Custom profile for TrikuSec\nupload=yes\n# License key from TrikuSec server\nlicense-key=YOUR_LICENSE_KEY\n# Point to the TrikuSec server\nupload-server=yourserver:3000/api/lynis\n# Required for self-signed certificates\nupload-options=--insecure\n\n# Custom settings\n# Too slow. Old systems do not support ignoring some directories\ntest_skip_always=CRYP-7902\n</code></pre> <p>Replace: - <code>YOUR_LICENSE_KEY</code> with your actual license key - <code>yourserver:3000</code> with your TrikuSec Lynis API server address (use <code>TRIKUSEC_LYNIS_API_URL</code> value)</p>"},{"location":"installation/client-setup/#4-run-audit","title":"4. Run Audit","text":"<p>Run Lynis with the custom profile:</p> <pre><code>lynis audit system --upload --quick\n</code></pre> <p>This will: 1. Perform a system audit 2. Upload the results to your TrikuSec server</p> <p>Upload Only</p> <p>You can use <code>lynis only-upload</code> to upload the last audit results without running a new audit.</p>"},{"location":"installation/client-setup/#5-schedule-regular-audits","title":"5. Schedule Regular Audits","text":"<p>For automated monitoring, schedule regular audits with cron.</p> <p>On recent Debian/Ubuntu versions, you can use the systemd timer:</p> <pre><code>systemctl start lynis.timer\nsystemctl enable lynis.timer\n</code></pre> <p>Or create a cron job:</p> <pre><code># Edit crontab\ncrontab -e\n\n# Add line to run audit daily at 2 AM\n0 2 * * * /usr/sbin/lynis audit system --upload --quick\n</code></pre>"},{"location":"installation/client-setup/#recommended-packages","title":"Recommended Packages","text":"<p>For the most comprehensive audit results, install these packages:</p> <pre><code>sudo apt install rkhunter auditd aide\n</code></pre> <p>These packages enable additional security checks: - rkhunter: Rootkit detection - auditd: Linux audit daemon - aide: File integrity monitoring</p>"},{"location":"installation/client-setup/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/client-setup/#connection-issues","title":"Connection Issues","text":"<p>If you're having trouble connecting to the server:</p> <ol> <li>Check server URL: Ensure <code>upload-server</code> points to the correct address</li> <li>Check firewall: Ensure port 3000 (or your configured port) is open</li> <li>Check SSL: If using HTTPS, ensure certificates are valid or use <code>--insecure</code> flag</li> </ol>"},{"location":"installation/client-setup/#license-key-issues","title":"License Key Issues","text":"<p>If you get license key errors:</p> <ol> <li>Verify the license key is correct in <code>/etc/lynis/custom.prf</code></li> <li>Check that the license key exists in TrikuSec server</li> <li>Ensure the license key hasn't been revoked</li> </ol>"},{"location":"installation/client-setup/#upload-failures","title":"Upload Failures","text":"<p>If uploads fail:</p> <ol> <li>Check network connectivity: <code>curl -k https://yourserver:3000/api/lynis/license</code></li> <li>Check server logs: <code>docker compose logs trikusec</code></li> <li>Verify the API endpoint is accessible</li> </ol>"},{"location":"installation/client-setup/#next-steps","title":"Next Steps","text":"<ul> <li>Using TrikuSec - Learn how to view and manage reports</li> <li>API Reference - For programmatic client setup</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"installation/docker/","title":"Docker","text":""},{"location":"installation/docker/#docker-installation","title":"Docker Installation","text":"<p>Docker is the recommended way to install TrikuSec. This guide will walk you through the setup process.</p>"},{"location":"installation/docker/#prerequisites","title":"Prerequisites","text":"<p>Before starting, you need to set up the required environment variables:</p>"},{"location":"installation/docker/#1-copy-the-example-environment-file","title":"1. Copy the Example Environment File","text":"<pre><code>cp .env.example .env\n</code></pre>"},{"location":"installation/docker/#2-generate-a-secure-secret_key","title":"2. Generate a Secure SECRET_KEY","text":"<pre><code>python3 -c \"import secrets; print(secrets.token_urlsafe(50))\"\n</code></pre>"},{"location":"installation/docker/#3-configure-environment-variables","title":"3. Configure Environment Variables","text":"<p>Edit the <code>.env</code> file and replace <code>GENERATE_THIS_SECRET_KEY_AS_EXPLAINED_ABOVE</code> with your newly generated key.</p>"},{"location":"installation/docker/#4-optional-configuration","title":"4. Optional Configuration","text":"<p>For development environments only, you can enable DEBUG mode:</p> <pre><code>DJANGO_DEBUG=True\n</code></pre> <p>Security Warning</p> <p>NEVER set <code>DJANGO_DEBUG=True</code> in production environments. Running with DEBUG enabled exposes sensitive information including stack traces, environment variables, and database queries to potential attackers.</p> <p>For production, set allowed hosts:</p> <pre><code>DJANGO_ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com\n</code></pre>"},{"location":"installation/docker/#installation-steps","title":"Installation Steps","text":""},{"location":"installation/docker/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/trikusec/trikusec.git\ncd trikusec\n</code></pre>"},{"location":"installation/docker/#2-start-trikusec","title":"2. Start TrikuSec","text":"<pre><code>docker compose up\n</code></pre> <p>This will:</p> <ul> <li>Build the TrikuSec Docker image</li> <li>Start the web server</li> <li>Initialize the database</li> <li>Create default admin user</li> </ul>"},{"location":"installation/docker/#3-access-trikusec","title":"3. Access TrikuSec","text":"<p>Once started, access TrikuSec at:</p> <pre><code>http://localhost:3000\n</code></pre> <p>Default credentials: - Username: <code>admin</code> - Password: <code>trikusec</code></p> <p>Change Default Password</p> <p>Never use default admin credentials in production. Set <code>TRIKUSEC_ADMIN_PASSWORD</code> in your <code>.env</code> file.</p>"},{"location":"installation/docker/#production-deployment","title":"Production Deployment","text":""},{"location":"installation/docker/#collect-static-files","title":"Collect Static Files","text":"<p>Before deploying to production, collect static files:</p> <pre><code>docker compose -f docker-compose.yml run --rm trikusec python manage.py collectstatic --no-input\n</code></pre>"},{"location":"installation/docker/#enable-https-security-headers","title":"Enable HTTPS Security Headers","text":"<p>Add to your <code>.env</code> file:</p> <pre><code>SECURE_SSL_REDIRECT=True\nSECURE_HSTS_SECONDS=31536000\nSESSION_COOKIE_SECURE=True\nCSRF_COOKIE_SECURE=True\n</code></pre>"},{"location":"installation/docker/#postgresql-setup","title":"PostgreSQL Setup","text":"<p>For production, PostgreSQL is strongly recommended. See the PostgreSQL Setup Guide for detailed instructions.</p>"},{"location":"installation/docker/#next-steps","title":"Next Steps","text":"<ul> <li>Configure Client - Set up Lynis clients</li> <li>Configuration Guide - Advanced configuration options</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"installation/postgresql/","title":"Postgresql","text":""},{"location":"installation/postgresql/#postgresql-setup","title":"PostgreSQL Setup","text":"<p>TrikuSec uses SQLite by default for easy installation, but PostgreSQL is strongly recommended for production deployments.</p>"},{"location":"installation/postgresql/#why-postgresql","title":"Why PostgreSQL?","text":"<ul> <li>Better Performance: Handles concurrent connections and large datasets more efficiently</li> <li>Concurrency: SQLite has limitations with concurrent writes</li> <li>Reliability: Better transaction handling and data integrity</li> <li>Scalability: Better suited for production workloads</li> </ul>"},{"location":"installation/postgresql/#quick-setup-with-docker-compose","title":"Quick Setup with Docker Compose","text":"<p>The easiest way to set up PostgreSQL is using Docker Compose.</p>"},{"location":"installation/postgresql/#1-add-postgresql-service","title":"1. Add PostgreSQL Service","text":"<p>Add a PostgreSQL service to your <code>docker-compose.yml</code>:</p> <pre><code>services:\n  postgres:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_DB: trikusec\n      POSTGRES_USER: trikusec_user\n      POSTGRES_PASSWORD: your_secure_password_here\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U trikusec_user\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"installation/postgresql/#2-configure-database_url","title":"2. Configure DATABASE_URL","text":"<p>Set the <code>DATABASE_URL</code> environment variable in your TrikuSec service:</p> <pre><code>services:\n  trikusec:\n    environment:\n      DATABASE_URL: postgresql://trikusec_user:your_secure_password_here@postgres:5432/trikusec\n</code></pre> <p>Or add it to your <code>.env</code> file:</p> <pre><code>DATABASE_URL=postgresql://trikusec_user:your_secure_password_here@postgres:5432/trikusec\n</code></pre>"},{"location":"installation/postgresql/#3-run-migrations","title":"3. Run Migrations","text":"<pre><code>docker compose exec trikusec python manage.py migrate\n</code></pre>"},{"location":"installation/postgresql/#manual-postgresql-setup","title":"Manual PostgreSQL Setup","text":""},{"location":"installation/postgresql/#1-install-postgresql","title":"1. Install PostgreSQL","text":"<pre><code># Ubuntu/Debian\nsudo apt-get install postgresql postgresql-contrib\n\n# macOS (with Homebrew)\nbrew install postgresql\nbrew services start postgresql\n</code></pre>"},{"location":"installation/postgresql/#2-create-database-and-user","title":"2. Create Database and User","text":"<pre><code># Connect to PostgreSQL\nsudo -u postgres psql\n\n# Create database and user\nCREATE DATABASE trikusec;\nCREATE USER trikusec_user WITH PASSWORD 'your_secure_password_here';\nALTER ROLE trikusec_user SET client_encoding TO 'utf8';\nALTER ROLE trikusec_user SET default_transaction_isolation TO 'read committed';\nALTER ROLE trikusec_user SET timezone TO 'UTC';\nGRANT ALL PRIVILEGES ON DATABASE trikusec TO trikusec_user;\n\\q\n</code></pre>"},{"location":"installation/postgresql/#3-set-database_url","title":"3. Set DATABASE_URL","text":"<pre><code>export DATABASE_URL=postgresql://trikusec_user:your_secure_password_here@localhost:5432/trikusec\n</code></pre> <p>Or add it to your <code>.env</code> file.</p>"},{"location":"installation/postgresql/#verifying-connection","title":"Verifying Connection","text":"<p>After setting up PostgreSQL, verify the connection:</p> <pre><code># Check if TrikuSec can connect\ndocker compose exec trikusec python manage.py dbshell\n\n# Or test the connection\ndocker compose exec trikusec python manage.py shell\n</code></pre> <pre><code>from django.db import connection\nconnection.ensure_connection()\nprint(\"PostgreSQL connection successful!\")\n</code></pre>"},{"location":"installation/postgresql/#migration-from-sqlite","title":"Migration from SQLite","text":"<p>If you're already running with SQLite and want to migrate to PostgreSQL:</p> <ol> <li> <p>Backup your SQLite database:    <pre><code>docker compose exec trikusec python manage.py dumpdata &gt; backup.json\n</code></pre></p> </li> <li> <p>Set up PostgreSQL (as described above)</p> </li> <li> <p>Load data into PostgreSQL:    <pre><code>docker compose exec trikusec python manage.py loaddata backup.json\n</code></pre></p> </li> </ol> <p>SQLite for Development</p> <p>SQLite is perfectly fine for small deployments, testing, or development. PostgreSQL becomes important when you have multiple concurrent users, large amounts of data, or need high availability.</p> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"usage/","title":"Index","text":""},{"location":"usage/#usage-guide","title":"Usage Guide","text":"<p>Learn how to use TrikuSec to manage and monitor your servers.</p>"},{"location":"usage/#getting-started","title":"Getting Started","text":"<ul> <li>Getting Started - First steps after installation</li> <li>Dashboard - Using the web dashboard</li> <li>Policies - Creating and managing policies</li> <li>Reports - Viewing and analyzing audit reports</li> </ul>"},{"location":"usage/#overview","title":"Overview","text":"<p>TrikuSec provides:</p> <ol> <li>Centralized Dashboard - View all your servers and their compliance status</li> <li>Policy Management - Define and apply security policies</li> <li>Report Analysis - Detailed audit reports with recommendations</li> <li>Compliance Tracking - Monitor compliance over time</li> </ol>"},{"location":"usage/#quick-start","title":"Quick Start","text":"<ol> <li>Access the Dashboard - Navigate to <code>http://yourserver:3000</code></li> <li>View Devices - See all servers that have sent reports</li> <li>Check Compliance - Review compliance status for each device</li> <li>Create Policies - Define rules for your organization</li> </ol>"},{"location":"usage/#next-steps","title":"Next Steps","text":"<ul> <li>Getting Started - Detailed walkthrough</li> <li>API Reference - For programmatic access</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"usage/dashboard/","title":"Dashboard","text":""},{"location":"usage/dashboard/#dashboard-guide","title":"Dashboard Guide","text":"<p>Complete guide to using the TrikuSec web dashboard.</p>"},{"location":"usage/dashboard/#main-dashboard","title":"Main Dashboard","text":"<p>The main dashboard provides an overview of your infrastructure:</p>"},{"location":"usage/dashboard/#key-metrics","title":"Key Metrics","text":"<ul> <li>Total Devices - Number of servers being monitored</li> <li>Compliance Rate - Overall compliance percentage</li> <li>Active Warnings - Number of security warnings</li> <li>Recent Reports - Latest audit reports</li> </ul>"},{"location":"usage/dashboard/#navigation","title":"Navigation","text":"<ul> <li>Devices - View and manage all devices</li> <li>Policies - Create and manage compliance policies</li> <li>Reports - View detailed audit reports</li> <li>Activity - Recent activity log</li> </ul>"},{"location":"usage/dashboard/#device-management","title":"Device Management","text":""},{"location":"usage/dashboard/#viewing-devices","title":"Viewing Devices","text":"<ol> <li>Click Devices from the main menu</li> <li>See list of all devices</li> <li>Filter by compliance status, license key, or date</li> </ol>"},{"location":"usage/dashboard/#device-details","title":"Device Details","text":"<p>Click on a device to view:</p> <ul> <li>Compliance Status - Current compliance percentage</li> <li>Last Report - Date and time of last audit</li> <li>Warnings - Security warnings and recommendations</li> <li>Suggestions - Improvement suggestions</li> <li>Report History - Historical compliance data</li> </ul>"},{"location":"usage/dashboard/#device-actions","title":"Device Actions","text":"<p>From the device detail page, use the Actions dropdown menu (located in the top-right corner of the Overview section) to access:</p> <ul> <li>Export to PDF - Generate and download a comprehensive PDF report containing device overview, audit details, compliance status, and security feedback</li> <li>Delete Device - Permanently remove a device and all its associated reports (requires confirmation)</li> </ul> <p>Additional actions available on the device detail page:</p> <ul> <li>View Compliance - Detailed compliance breakdown</li> <li>View Warnings - Security warnings for this device</li> <li>View Suggestions - Recommendations for improvement</li> </ul>"},{"location":"usage/dashboard/#policy-management","title":"Policy Management","text":"<p>See Policies for detailed policy management guide.</p>"},{"location":"usage/dashboard/#report-analysis","title":"Report Analysis","text":"<p>See Reports for detailed report analysis guide.</p>"},{"location":"usage/dashboard/#search-and-filtering","title":"Search and Filtering","text":"<p>Use the search bar to: - Find devices by hostname - Search by license key - Filter by compliance status</p>"},{"location":"usage/dashboard/#tips-and-tricks","title":"Tips and Tricks","text":"<ul> <li>Bookmark Devices - Bookmark frequently accessed devices</li> <li>Export Data - Export reports and compliance data</li> <li>Set Alerts - Configure alerts for compliance issues</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"usage/getting-started/","title":"Getting started","text":""},{"location":"usage/getting-started/#getting-started","title":"Getting Started","text":"<p>This guide will help you get started with TrikuSec after installation.</p>"},{"location":"usage/getting-started/#first-login","title":"First Login","text":"<ol> <li> <p>Access TrikuSec - Navigate to <code>http://yourserver:3000</code></p> </li> <li> <p>Login - Use default credentials:</p> </li> <li>Username: <code>admin</code></li> <li>Password: <code>trikusec</code></li> </ol> <p>Change Default Password</p> <p>Immediately change the default password after first login.</p>"},{"location":"usage/getting-started/#initial-setup","title":"Initial Setup","text":""},{"location":"usage/getting-started/#1-change-admin-password","title":"1. Change Admin Password","text":"<ol> <li>Click on your username in the top right</li> <li>Select \"Change Password\"</li> <li>Enter a strong password</li> </ol>"},{"location":"usage/getting-started/#2-generate-license-keys","title":"2. Generate License Keys","text":"<p>License keys are required for clients to upload reports.</p> <ol> <li>Navigate to the admin section</li> <li>Create a new license key</li> <li>Copy the license key for use in client configuration</li> </ol>"},{"location":"usage/getting-started/#3-configure-first-client","title":"3. Configure First Client","text":"<p>See Client Setup for detailed instructions.</p>"},{"location":"usage/getting-started/#4-review-default-baseline-ruleset","title":"4. Review Default Baseline Ruleset","text":"<p>TrikuSec includes a \"Default baseline\" ruleset with essential security checks. You can: - View it in Policies \u2192 Rulesets - Assign it to devices for immediate compliance monitoring - Use it as a starting point for custom policies</p>"},{"location":"usage/getting-started/#dashboard-overview","title":"Dashboard Overview","text":"<p>The main dashboard shows:</p> <ul> <li>Devices - All servers that have sent reports</li> <li>Compliance Status - Overall compliance percentage</li> <li>Recent Activity - Latest audit reports</li> <li>Warnings - Security warnings and recommendations</li> </ul>"},{"location":"usage/getting-started/#viewing-your-first-report","title":"Viewing Your First Report","text":"<p>Once a client has uploaded a report:</p> <ol> <li>Navigate to Devices from the main menu</li> <li>Click on a device to view details</li> <li>Review the compliance status</li> <li>Check warnings and suggestions</li> </ol>"},{"location":"usage/getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Dashboard Guide - Learn about all dashboard features</li> <li>Policy Management - Create and manage policies</li> <li>Report Analysis - Understand audit reports</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"usage/policies/","title":"Policies","text":""},{"location":"usage/policies/#policy-management","title":"Policy Management","text":"<p>Learn how to create and manage compliance policies in TrikuSec.</p>"},{"location":"usage/policies/#overview","title":"Overview","text":"<p>Policies in TrikuSec allow you to:</p> <ul> <li>Define security and operational requirements</li> <li>Apply rules to devices</li> <li>Track compliance against policies</li> <li>Get recommendations for improvement</li> </ul>"},{"location":"usage/policies/#policy-components","title":"Policy Components","text":""},{"location":"usage/policies/#policy-rules","title":"Policy Rules","text":"<p>Individual rules that define specific requirements using query expressions:</p> <ul> <li>Name - Descriptive name for the rule</li> <li>Rule Query - Query expression that evaluates against Lynis report data</li> <li>Description - Purpose and explanation of the rule</li> <li>Enabled - Whether the rule is active</li> <li>Alert - Whether to generate alerts when rule fails</li> <li>Created By - User who created the rule (read-only)</li> <li>System Rules - Pre-installed rules marked as \"System\" cannot be edited or deleted</li> </ul>"},{"location":"usage/policies/#policy-rule-sets","title":"Policy Rule Sets","text":"<p>Collections of rules that can be applied to devices:</p> <ul> <li>Name - Descriptive name for the rule set</li> <li>Description - Purpose and scope</li> <li>Rules - List of policy rules</li> <li>Created By - User who created the ruleset (read-only)</li> <li>System Rulesets - Pre-installed rulesets marked as \"System\" cannot be edited or deleted</li> </ul>"},{"location":"usage/policies/#rule-query-syntax","title":"Rule Query Syntax","text":"<p>Rule queries use JMESPath expressions to evaluate device reports. JMESPath is a query language for JSON that provides powerful and safe expression evaluation.</p>"},{"location":"usage/policies/#basic-syntax","title":"Basic Syntax","text":"<p>Field Access: Access fields from the Lynis report using their names</p> <ul> <li>Examples: <code>os</code>, <code>hardening_index</code>, <code>firewall_active</code>, <code>vulnerable_packages_found</code></li> <li>Field names are case-sensitive</li> </ul> <p>Comparison Operators:</p> <ul> <li><code>==</code> - Equals</li> <li><code>!=</code> - Not equals</li> <li><code>&gt;</code> - Greater than</li> <li><code>&gt;=</code> - Greater than or equal</li> <li><code>&lt;</code> - Less than</li> <li><code>&lt;=</code> - Less than or equal</li> </ul> <p>Literals:</p> <ul> <li>Strings: Use single quotes, e.g., <code>'Linux'</code>, <code>'Ubuntu'</code></li> <li>Numbers: Use backticks for numeric literals, e.g., <code>`70`</code>, <code>`0`</code>, <code>`1`</code></li> </ul> <p>Functions:</p> <ul> <li><code>contains(field, 'value')</code> - Check if string or list contains value</li> </ul> <p>Boolean Logic (NEW!):</p> <ul> <li><code>&amp;&amp;</code> - AND operator</li> <li><code>||</code> - OR operator</li> <li><code>!</code> - NOT operator</li> </ul>"},{"location":"usage/policies/#query-examples","title":"Query Examples","text":"<p>String equality: <pre><code>os == 'Linux'\nos_name == 'Ubuntu'\nhostname == 'web-server-01'\n</code></pre></p> <p>Numeric comparisons: <pre><code>hardening_index &gt; `70`\nhardening_index &gt;= `60`\nhardening_index &lt; `80`\nvulnerable_packages_found == `0`\n</code></pre></p> <p>Contains function (for strings or lists): <pre><code>contains(automation_tool_running, 'ansible')\ncontains(vulnerable_package, 'libc6')\n</code></pre></p> <p>Not equals: <pre><code>os != 'Windows'\nfirewall_active != `0`\n</code></pre></p> <p>Complex boolean expressions: <pre><code>os == 'Linux' &amp;&amp; hardening_index &gt; `70`\nhardening_index &lt; `50` || vulnerable_packages_found &gt; `0`\n!(firewall_active == `1`)\nos == 'Linux' &amp;&amp; (hardening_index &gt; `70` || vulnerable_packages_found == `0`)\n</code></pre></p> <p>JMESPath Documentation</p> <p>For advanced query syntax and more examples, see the JMESPath Tutorial and JMESPath Examples.</p>"},{"location":"usage/policies/#available-report-fields","title":"Available Report Fields","text":"<p>Common fields available in Lynis reports include:</p> <p>System Information:</p> <ul> <li><code>os</code> - Operating system (e.g., \"Linux\")</li> <li><code>os_name</code> - OS distribution name (e.g., \"Ubuntu\")</li> <li><code>os_version</code> - OS version (e.g., \"22.04\")</li> <li><code>hostname</code> - System hostname</li> <li><code>lynis_version</code> - Lynis version used</li> </ul> <p>Security Metrics:</p> <ul> <li><code>hardening_index</code> - Overall hardening score (0-100)</li> <li><code>vulnerable_packages_found</code> - Number of vulnerable packages (0 or 1)</li> <li><code>firewall_active</code> - Firewall status (0 or 1)</li> <li><code>firewall_installed</code> - Firewall installed (0 or 1)</li> <li><code>ssh_daemon_running</code> - SSH daemon status (0 or 1)</li> <li><code>openssh_daemon_running</code> - OpenSSH daemon status (0 or 1)</li> </ul> <p>Package Management:</p> <ul> <li><code>installed_packages</code> - Number of installed packages</li> <li><code>vulnerable_package</code> - List of vulnerable packages (use <code>contains()</code> function)</li> </ul> <p>Network:</p> <ul> <li><code>ipv6_mode</code> - IPv6 mode (e.g., \"auto\")</li> <li><code>dhcp_client_running</code> - DHCP client status (0 or 1)</li> </ul> <p>Services:</p> <ul> <li><code>automation_tool_running</code> - Automation tool name (if any)</li> <li><code>ntp_daemon_running</code> - NTP daemon status (0 or 1)</li> <li><code>linux_auditd_running</code> - Audit daemon status (0 or 1)</li> </ul> <p>Finding Available Fields</p> <p>To see all available fields for a device and discover new fields for rule queries:</p> <ol> <li>Navigate to Devices \u2192 Select a device</li> <li>View the Device Detail page</li> <li>Access the full report which shows all available fields from the Lynis audit</li> </ol> <p>The full report displays all key-value pairs from the device's latest audit, making it easy to identify field names and their values for creating specific rule queries. Fields are extracted directly from the Lynis report data.</p>"},{"location":"usage/policies/#system-rules-and-rulesets","title":"System Rules and Rulesets","text":"<p>TrikuSec includes pre-installed system rules and a \"Default baseline\" ruleset that provides essential security checks:</p> <ul> <li>High Hardening Index - Requires hardening index &gt; 70</li> <li>No Vulnerable Packages - Ensures no vulnerable packages detected</li> <li>Recent Audit - Requires audit within last 7 days</li> </ul> <p>System rules and rulesets are marked with \"System\" as the creator and cannot be edited or deleted. You can use them in your custom rulesets or create your own rules.</p>"},{"location":"usage/policies/#creating-policies","title":"Creating Policies","text":""},{"location":"usage/policies/#1-create-a-policy-rule","title":"1. Create a Policy Rule","text":"<ol> <li>Navigate to Policies \u2192 Rules</li> <li>Click Create New Rule (or use the edit panel)</li> <li>Configure:</li> <li>Name: Descriptive name (e.g., \"Linux OS Check\")</li> <li>Rule Query: JMESPath query expression (e.g., <code>os == 'Linux'</code>)</li> <li>Description: Explanation of what the rule checks</li> <li>Enabled: Check to activate the rule</li> <li>Alert: Check to generate alerts on failure</li> <li>Save the rule</li> </ol>"},{"location":"usage/policies/#2-create-a-policy-rule-set","title":"2. Create a Policy Rule Set","text":"<ol> <li>Navigate to Policies \u2192 Rule Sets</li> <li>Click Create New Rule Set</li> <li>Enter name and description</li> <li>Select rules to include from the list</li> <li>Save the rule set</li> </ol>"},{"location":"usage/policies/#3-apply-to-devices","title":"3. Apply to Devices","text":"<ol> <li>Navigate to Devices</li> <li>Select a device</li> <li>Go to Policy Rulesets tab</li> <li>Assign rule sets to the device</li> </ol>"},{"location":"usage/policies/#common-policy-examples","title":"Common Policy Examples","text":""},{"location":"usage/policies/#operating-system-check","title":"Operating System Check","text":"<p>Ensure device is running Linux:</p> <p>Query: <pre><code>os == 'Linux'\n</code></pre></p> <p>Description: Verifies that the operating system is Linux.</p>"},{"location":"usage/policies/#hardening-index-threshold","title":"Hardening Index Threshold","text":"<p>Require minimum hardening score:</p> <p>Query: <pre><code>hardening_index &gt;= `70`\n</code></pre></p> <p>Description: Ensures the system has a hardening index of at least 70.</p>"},{"location":"usage/policies/#no-vulnerable-packages","title":"No Vulnerable Packages","text":"<p>Ensure no vulnerable packages are found:</p> <p>Query: <pre><code>vulnerable_packages_found == `0`\n</code></pre></p> <p>Description: Checks that no vulnerable packages were detected in the system.</p>"},{"location":"usage/policies/#firewall-active","title":"Firewall Active","text":"<p>Require firewall to be active:</p> <p>Query: <pre><code>firewall_active == `1`\n</code></pre></p> <p>Description: Verifies that the firewall is active and running.</p>"},{"location":"usage/policies/#specific-os-distribution","title":"Specific OS Distribution","text":"<p>Require Ubuntu 22.04:</p> <p>Query: <pre><code>os_name == 'Ubuntu' &amp;&amp; os_version == '22.04'\n</code></pre></p> <p>Description: Ensures the system is running Ubuntu 22.04 LTS. This example shows how to combine multiple conditions using the <code>&amp;&amp;</code> (AND) operator.</p>"},{"location":"usage/policies/#automation-tool-check","title":"Automation Tool Check","text":"<p>Check if Ansible is running:</p> <p>Query: <pre><code>contains(automation_tool_running, 'ansible')\n</code></pre></p> <p>Description: Verifies that Ansible automation tool is present.</p>"},{"location":"usage/policies/#ssh-service-running","title":"SSH Service Running","text":"<p>Require SSH daemon to be running:</p> <p>Query: <pre><code>openssh_daemon_running == `1`\n</code></pre></p> <p>Description: Ensures OpenSSH daemon is active for remote access.</p>"},{"location":"usage/policies/#compliance-tracking","title":"Compliance Tracking","text":""},{"location":"usage/policies/#viewing-compliance","title":"Viewing Compliance","text":"<ol> <li>Navigate to a device</li> <li>Click Compliance</li> <li>See compliance status for each rule</li> <li>Review failed rules and recommendations</li> </ol>"},{"location":"usage/policies/#compliance-reports","title":"Compliance Reports","text":"<ul> <li>Overall compliance percentage</li> <li>Per-rule compliance status</li> <li>Historical compliance trends</li> <li>Recommendations for improvement</li> </ul>"},{"location":"usage/policies/#best-practices","title":"Best Practices","text":"<ul> <li>Start Simple - Begin with a few critical rules</li> <li>Test First - Test policies on non-production devices</li> <li>Document - Document why each rule is important</li> <li>Review Regularly - Review and update policies regularly</li> <li>Organize - Group related rules into rule sets</li> </ul>"},{"location":"usage/policies/#next-steps","title":"Next Steps","text":"<ul> <li>Reports - Understand audit reports</li> <li>API Reference - Manage policies via API</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"},{"location":"usage/reports/","title":"Reports","text":""},{"location":"usage/reports/#report-analysis","title":"Report Analysis","text":"<p>Learn how to view and analyze audit reports in TrikuSec.</p>"},{"location":"usage/reports/#viewing-reports","title":"Viewing Reports","text":""},{"location":"usage/reports/#device-reports","title":"Device Reports","text":"<ol> <li>Navigate to Devices</li> <li>Click on a device</li> <li>View the latest report and compliance status</li> </ol>"},{"location":"usage/reports/#report-details","title":"Report Details","text":"<p>Each report includes:</p> <ul> <li>Audit Date - When the audit was performed</li> <li>Compliance Status - Overall compliance percentage</li> <li>Warnings - Security warnings found</li> <li>Suggestions - Recommendations for improvement</li> <li>Test Results - Individual test results</li> </ul>"},{"location":"usage/reports/#report-components","title":"Report Components","text":""},{"location":"usage/reports/#compliance-status","title":"Compliance Status","text":"<p>Overall compliance percentage based on: - Applied policy rules - Test results - Severity levels</p>"},{"location":"usage/reports/#warnings","title":"Warnings","text":"<p>Security warnings that need attention: - High Priority - Critical security issues - Medium Priority - Important recommendations - Low Priority - Best practice suggestions</p>"},{"location":"usage/reports/#suggestions","title":"Suggestions","text":"<p>Actionable recommendations: - Configuration changes - Package installations - System hardening steps</p>"},{"location":"usage/reports/#analyzing-reports","title":"Analyzing Reports","text":""},{"location":"usage/reports/#compare-reports","title":"Compare Reports","text":"<p>Compare reports over time to: - Track compliance trends - Identify regressions - Measure improvement</p>"},{"location":"usage/reports/#filter-and-search","title":"Filter and Search","text":"<ul> <li>Filter by test category</li> <li>Search for specific tests</li> <li>Focus on failed tests</li> </ul>"},{"location":"usage/reports/#export-reports","title":"Export Reports","text":"<p>TrikuSec supports exporting device reports to PDF format for documentation, compliance audits, and sharing with teams.</p> <p>To export a device report to PDF:</p> <ol> <li>Navigate to Devices</li> <li>Click on the device you want to export</li> <li>Click the Actions dropdown menu (top-right corner of the Overview section)</li> <li>Select Export to PDF</li> </ol> <p>The PDF report includes: - Device overview (hostname, IP address, OS, enrollment details) - Audit information (Lynis version, hardening index, test results) - Compliance status with detailed ruleset evaluations - Security feedback (warnings and suggestions)</p> <p>The PDF file is automatically named with the device hostname and timestamp (e.g., <code>device-hostname-20251116_073000.pdf</code>).</p>"},{"location":"usage/reports/#understanding-test-results","title":"Understanding Test Results","text":""},{"location":"usage/reports/#test-categories","title":"Test Categories","text":"<p>Lynis organizes tests into categories:</p> <ul> <li>Authentication - Login and access controls</li> <li>Boot Services - System startup services</li> <li>File Systems - File permissions and security</li> <li>Firewall - Network security</li> <li>Kernel - System kernel settings</li> <li>Networking - Network configuration</li> <li>Processes - Running processes</li> <li>Storage - Disk and storage security</li> </ul>"},{"location":"usage/reports/#test-severity","title":"Test Severity","text":"<ul> <li>Error - Critical issues requiring immediate attention</li> <li>Warning - Important recommendations</li> <li>Suggestion - Best practice improvements</li> </ul>"},{"location":"usage/reports/#best-practices","title":"Best Practices","text":"<ul> <li>Review Regularly - Check reports after each audit</li> <li>Address Warnings - Prioritize high-severity warnings</li> <li>Track Trends - Monitor compliance over time</li> <li>Document Actions - Document remediation steps</li> <li>Share Findings - Share reports with relevant teams</li> </ul>"},{"location":"usage/reports/#next-steps","title":"Next Steps","text":"<ul> <li>Policies - Create policies to track compliance</li> <li>API Reference - Access reports programmatically</li> </ul> <p>[API]: Application Programming Interface [HSTS]: HTTP Strict Transport Security [SSL]: Secure Sockets Layer [TLS]: Transport Layer Security [CSRF]: Cross-Site Request Forgery [SQL]: Structured Query Language [HTTPS]: HTTP Secure [HTTP]: Hypertext Transfer Protocol [CI]: Continuous Integration [CD]: Continuous Deployment [DDoS]: Distributed Denial of Service [OWASP]: Open Web Application Security Project *[CIS]: Center for Internet Security</p>"}]}